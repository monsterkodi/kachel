// koffee 1.3.0

/*
00     00   0000000   000  000   000
000   000  000   000  000  0000  000
000000000  000000000  000  000 0 000
000 0 000  000   000  000  000  0000
000   000  000   000  000  000   000
 */
var BrowserWindow, KachelApp, activeWin, app, electron, hide, kachelSize, kacheln, klog, loadKacheln, mainWin, onArrange, onFocusKachel, onHideKacheln, onNewKachel, onRaiseKacheln, onWinBlur, onWinFocus, post, prefs, raise, raised, raising, ref, relWin, shortcut, slash, winEvents, winWithId, wins;

ref = require('kxk'), post = ref.post, prefs = ref.prefs, slash = ref.slash, klog = ref.klog, app = ref.app;

electron = require('electron');

BrowserWindow = electron.BrowserWindow;

kachelSize = 150;

mainWin = null;

winEvents = function(win) {
    win.on('focus', onWinFocus);
    win.on('blur', onWinBlur);
    return win.setHasShadow(false);
};

shortcut = slash.win() && 'ctrl+alt+k' || 'command+alt+k';

KachelApp = new app({
    dir: __dirname,
    pkg: require('../package.json'),
    shortcut: shortcut,
    index: 'mainwin.html',
    icon: '../img/app.ico',
    tray: '../img/menu.png',
    about: '../img/about.png',
    minWidth: 50,
    minHeight: 50,
    maxWidth: 50,
    maxHeight: 50,
    width: 50,
    height: 50,
    resizable: false,
    maximizable: false,
    saveBounds: false,
    onWinReady: function(win) {
        mainWin = win;
        winEvents(win);
        return loadKacheln();
    }
});

loadKacheln = function() {
    var kachelData, kachelId, ref1, results;
    ref1 = prefs.get('kacheln', {});
    results = [];
    for (kachelId in ref1) {
        kachelData = ref1[kachelId];
        if (kachelId !== 'appl') {
            results.push(onNewKachel(kachelData));
        } else {
            results.push(void 0);
        }
    }
    return results;
};

onNewKachel = function(arg) {
    var data, html, ref1, ref2, win;
    html = (ref1 = arg.html) != null ? ref1 : 'default', data = (ref2 = arg.data) != null ? ref2 : null;
    win = new electron.BrowserWindow({
        movable: true,
        transparent: true,
        autoHideMenuBar: true,
        frame: false,
        resizable: false,
        maximizable: false,
        minimizable: false,
        fullscreen: false,
        show: false,
        transparent: false,
        fullscreenenable: false,
        backgroundColor: '#181818',
        width: kachelSize,
        height: kachelSize,
        minWidth: kachelSize,
        minHeight: kachelSize,
        maxWidth: kachelSize,
        maxHeight: kachelSize,
        webPreferences: {
            nodeIntegration: true
        }
    });
    win.loadURL("file://" + __dirname + "/../js/" + html + ".html");
    win.webContents.on('dom-ready', function(event) {
        if (data != null) {
            post.toWin(win.id, 'initData', data);
        }
        return win.show();
    });
    winEvents(win);
    return win;
};

post.on('newKachel', onNewKachel);

onArrange = function() {
    var b, i, len, ref1, ref2, results, sh, snap, sw, w, wa;
    snap = 20;
    wa = electron.screen.getPrimaryDisplay().workAreaSize;
    ref1 = [wa.width, wa.height], sw = ref1[0], sh = ref1[1];
    ref2 = kacheln();
    results = [];
    for (i = 0, len = ref2.length; i < len; i++) {
        w = ref2[i];
        b = w.getBounds();
        console.log(Math.abs(b.x + b.width - sw));
        if (Math.abs(b.x) < snap) {
            results.push(console.log('<', w.id, b));
        } else if (Math.abs(b.x + b.width - sw) < snap) {
            results.push(console.log('>', w.id, b));
        } else {
            results.push(void 0);
        }
    }
    return results;
};

post.on('arrange', onArrange);

raised = false;

raising = false;

raise = function(win) {
    win.showInactive();
    return win.focus();
};

hide = function(win) {
    return win.hide();
};

onWinBlur = function(event) {
    if (event.sender === mainWin) {
        return raised = false;
    }
};

onWinFocus = function(event) {
    if (event.sender === mainWin) {
        if (!raised && !raising) {
            return onRaiseKacheln();
        } else if (raising) {
            raised = true;
            return raising = false;
        }
    }
};

onHideKacheln = function() {
    var i, len, ref1, win;
    ref1 = kacheln();
    for (i = 0, len = ref1.length; i < len; i++) {
        win = ref1[i];
        hide(win);
    }
    return raised = false;
};

onRaiseKacheln = function() {
    var i, len, ref1, win;
    if (raised) {
        onHideKacheln();
        return;
    }
    raising = true;
    ref1 = kacheln();
    for (i = 0, len = ref1.length; i < len; i++) {
        win = ref1[i];
        raise(win);
    }
    raised = true;
    return raise(mainWin);
};

post.on('raiseKacheln', onRaiseKacheln);

post.on('quit', KachelApp.quitApp);

onFocusKachel = function(winId, direction) {
    switch (direction) {
        case 'left':
        case 'up':
            return raise(relWin(winId, -1));
        case 'right':
        case 'down':
            return raise(relWin(winId, 1));
    }
};

post.on('focusKachel', onFocusKachel);

wins = function() {
    return BrowserWindow.getAllWindows().sort(function(a, b) {
        return a.id - b.id;
    });
};

activeWin = function() {
    return BrowserWindow.getFocusedWindow();
};

kacheln = function() {
    return wins().filter(function(w) {
        return w !== mainWin;
    });
};

winWithId = function(id) {
    return BrowserWindow.fromId(id);
};

relWin = function(winId, delta) {
    var w, wi, wl;
    wl = wins();
    w = BrowserWindow.fromId(winId);
    wi = wl.indexOf(w);
    return wl[(wl.length + wi + delta) % wl.length];
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBLElBQUE7O0FBUUEsTUFBb0MsT0FBQSxDQUFRLEtBQVIsQ0FBcEMsRUFBRSxlQUFGLEVBQVEsaUJBQVIsRUFBZSxpQkFBZixFQUFzQixlQUF0QixFQUE0Qjs7QUFFNUIsUUFBQSxHQUFXLE9BQUEsQ0FBUSxVQUFSOztBQUNYLGFBQUEsR0FBZ0IsUUFBUSxDQUFDOztBQUV6QixVQUFBLEdBQWE7O0FBQ2IsT0FBQSxHQUFVOztBQUVWLFNBQUEsR0FBWSxTQUFDLEdBQUQ7SUFFUixHQUFHLENBQUMsRUFBSixDQUFPLE9BQVAsRUFBZ0IsVUFBaEI7SUFDQSxHQUFHLENBQUMsRUFBSixDQUFPLE1BQVAsRUFBZ0IsU0FBaEI7V0FDQSxHQUFHLENBQUMsWUFBSixDQUFpQixLQUFqQjtBQUpROztBQU1aLFFBQUEsR0FBVyxLQUFLLENBQUMsR0FBTixDQUFBLENBQUEsSUFBZ0IsWUFBaEIsSUFBZ0M7O0FBRTNDLFNBQUEsR0FBWSxJQUFJLEdBQUosQ0FDUjtJQUFBLEdBQUEsRUFBZ0IsU0FBaEI7SUFDQSxHQUFBLEVBQWdCLE9BQUEsQ0FBUSxpQkFBUixDQURoQjtJQUVBLFFBQUEsRUFBZ0IsUUFGaEI7SUFHQSxLQUFBLEVBQWdCLGNBSGhCO0lBSUEsSUFBQSxFQUFnQixnQkFKaEI7SUFLQSxJQUFBLEVBQWdCLGlCQUxoQjtJQU1BLEtBQUEsRUFBZ0Isa0JBTmhCO0lBT0EsUUFBQSxFQUFnQixFQVBoQjtJQVFBLFNBQUEsRUFBZ0IsRUFSaEI7SUFTQSxRQUFBLEVBQWdCLEVBVGhCO0lBVUEsU0FBQSxFQUFnQixFQVZoQjtJQVdBLEtBQUEsRUFBZ0IsRUFYaEI7SUFZQSxNQUFBLEVBQWdCLEVBWmhCO0lBYUEsU0FBQSxFQUFnQixLQWJoQjtJQWNBLFdBQUEsRUFBZ0IsS0FkaEI7SUFlQSxVQUFBLEVBQWdCLEtBZmhCO0lBZ0JBLFVB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QUM0QixLQUFBLENBQU0sTUFBQSxDQUFPLEtBQVAsRUFBYyxDQUFDLENBQWYsQ0FBTjtBQUQ1QixhQUVTLE9BRlQ7QUFBQSxhQUVnQixNQUZoQjttQkFFNEIsS0FBQSxDQUFNLE1BQUEsQ0FBTyxLQUFQLEVBQWUsQ0FBZixDQUFOO0FBRjVCO0FBRFk7O0FBS2hCLElBQUksQ0FBQyxFQUFMLENBQVEsYUFBUixFQUFzQixhQUF0Qjs7QUFVQSxJQUFBLEdBQVksU0FBQTtXQUFHLGFBQWEsQ0FBQyxhQUFkLENBQUEsQ0FBNkIsQ0FBQyxJQUE5QixDQUFtQyxTQUFDLENBQUQsRUFBRyxDQUFIO2VBQVMsQ0FBQyxDQUFDLEVBQUYsR0FBTyxDQUFDLENBQUM7SUFBbEIsQ0FBbkM7QUFBSDs7QUFDWixTQUFBLEdBQVksU0FBQTtXQUFHLGFBQWEsQ0FBQyxnQkFBZCxDQUFBO0FBQUg7O0FBQ1osT0FBQSxHQUFZLFNBQUE7V0FBRyxJQUFBLENBQUEsQ0FBTSxDQUFDLE1BQVAsQ0FBYyxTQUFDLENBQUQ7ZUFBTyxDQUFBLEtBQUs7SUFBWixDQUFkO0FBQUg7O0FBQ1osU0FBQSxHQUFZLFNBQUMsRUFBRDtXQUFRLGFBQWEsQ0FBQyxNQUFkLENBQXFCLEVBQXJCO0FBQVI7O0FBRVosTUFBQSxHQUFTLFNBQUMsS0FBRCxFQUFRLEtBQVI7QUFDTCxRQUFBO0lBQUEsRUFBQSxHQUFLLElBQUEsQ0FBQTtJQUNMLENBQUEsR0FBSSxhQUFhLENBQUMsTUFBZCxDQUFxQixLQUFyQjtJQUNKLEVBQUEsR0FBSyxFQUFFLENBQUMsT0FBSCxDQUFXLENBQVg7V0FDTCxFQUFHLENBQUEsQ0FBQyxFQUFFLENBQUMsTUFBSCxHQUFVLEVBQVYsR0FBYSxLQUFkLENBQUEsR0FBcUIsRUFBRSxDQUFDLE1BQXhCO0FBSkUiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwICAgICAwMCAgIDAwMDAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwXG4wMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAwMDAgMCAwMDBcbjAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwXG4jIyNcblxueyBwb3N0LCBwcmVmcywgc2xhc2gsIGtsb2csIGFwcCB9ID0gcmVxdWlyZSAna3hrJ1xuXG5lbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xuQnJvd3NlcldpbmRvdyA9IGVsZWN0cm9uLkJyb3dzZXJXaW5kb3dcblxua2FjaGVsU2l6ZSA9IDE1MFxubWFpbldpbiA9IG51bGxcblxud2luRXZlbnRzID0gKHdpbikgLT5cbiAgICAjIHdpbi5vbiAnY2xvc2VkJyBrYWNoZWxDbG9zZWRcbiAgICB3aW4ub24gJ2ZvY3VzJyAgb25XaW5Gb2N1c1xuICAgIHdpbi5vbiAnYmx1cicgICBvbldpbkJsdXJcbiAgICB3aW4uc2V0SGFzU2hhZG93IGZhbHNlXG4gICAgXG5zaG9ydGN1dCA9IHNsYXNoLndpbigpIGFuZCAnY3RybCthbHQraycgb3IgJ2NvbW1hbmQrYWx0K2snXG5cbkthY2hlbEFwcCA9IG5ldyBhcHBcbiAgICBkaXI6ICAgICAgICAgICAgX19kaXJuYW1lXG4gICAgcGtnOiAgICAgICAgICAgIHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcbiAgICBzaG9ydGN1dDogICAgICAgc2hvcnRjdXRcbiAgICBpbmRleDogICAgICAgICAgJ21haW53aW4uaHRtbCdcbiAgICBpY29uOiAgICAgICAgICAgJy4uL2ltZy9hcHAuaWNvJ1xuICAgIHRyYXk6ICAgICAgICAgICAnLi4vaW1nL21lbnUucG5nJ1xuICAgIGFib3V0OiAgICAgICAgICAnLi4vaW1nL2Fib3V0LnBuZydcbiAgICBtaW5XaWR0aDogICAgICAgNTBcbiAgICBtaW5IZWlnaHQ6ICAgICAgNTBcbiAgICBtYXhXaWR0aDogICAgICAgNTBcbiAgICBtYXhIZWlnaHQ6ICAgICAgNTBcbiAgICB3aWR0aDogICAgICAgICAgNTBcbiAgICBoZWlnaHQ6ICAgICAgICAgNTBcbiAgICByZXNpemFibGU6ICAgICAgZmFsc2UgI3RydWVcbiAgICBtYXhpbWl6YWJsZTogICAgZmFsc2VcbiAgICBzYXZlQm91bmRzOiAgICAgZmFsc2VcbiAgICBvbldpblJlYWR5OiAgICAgKHdpbikgLT5cbiAgICAgICAgbWFpbldpbiA9IHdpblxuICAgICAgICB3aW5FdmVudHMgd2luXG4gICAgICAgIGxvYWRLYWNoZWxuKClcblxubG9hZEthY2hlbG4gPSAtPlxuICAgIFxuICAgIGZvciBrYWNoZWxJZCxrYWNoZWxEYXRhIG9mIHByZWZzLmdldCAna2FjaGVsbicge31cbiAgICAgICAgaWYga2FjaGVsSWQgIT0gJ2FwcGwnXG4gICAgICAgICAgICBvbk5ld0thY2hlbCBrYWNoZWxEYXRhXG5cbiMgS2FjaGVsQXBwLmFwcC5vbiAncmVhZHknIGxvYWRLYWNoZWxuXG5cbiMgMDAwICAgMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAgICBcbiMgMDAwICAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICBcbiMgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAgICAgICAwMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgICAgICBcbiMgMDAwICAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICBcblxub25OZXdLYWNoZWwgPSAoaHRtbDonZGVmYXVsdCcsIGRhdGE6KSAtPlxuXG4gICAgd2luID0gbmV3IGVsZWN0cm9uLkJyb3dzZXJXaW5kb3dcbiAgICAgICAgXG4gICAgICAgIG1vdmFibGU6ICAgICAgICAgdHJ1ZVxuICAgICAgICB0cmFuc3BhcmVudDogICAgIHRydWVcbiAgICAgICAgYXV0b0hpZGVNZW51QmFyOiB0cnVlXG4gICAgICAgIGZyYW1lOiAgICAgICAgICAgZmFsc2VcbiAgICAgICAgcmVzaXphYmxlOiAgICAgICBmYWxzZVxuICAgICAgICBtYXhpbWl6YWJsZTogICAgIGZhbHNlXG4gICAgICAgIG1pbmltaXphYmxlOiAgICAgZmFsc2VcbiAgICAgICAgZnVsbHNjcmVlbjogICAgICBmYWxzZVxuICAgICAgICBzaG93OiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgIHRyYW5zcGFyZW50OiAgICAgZmFsc2VcbiAgICAgICAgZnVsbHNjcmVlbmVuYWJsZTogZmFsc2VcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzE4MTgxOCdcbiAgICAgICAgd2lkdGg6ICAgICAgICAgICBrYWNoZWxTaXplXG4gICAgICAgIGhlaWdodDogICAgICAgICAga2FjaGVsU2l6ZVxuICAgICAgICBtaW5XaWR0aDogICAgICAgIGthY2hlbFNpemVcbiAgICAgICAgbWluSGVpZ2h0OiAgICAgICBrYWNoZWxTaXplXG4gICAgICAgIG1heFdpZHRoOiAgICAgICAga2FjaGVsU2l6ZVxuICAgICAgICBtYXhIZWlnaHQ6ICAgICAgIGthY2hlbFNpemVcbiAgICAgICAgd2ViUHJlZmVyZW5jZXM6XG4gICAgICAgICAgICBub2RlSW50ZWdyYXRpb246IHRydWVcbiAgICBcbiAgICB3aW4ubG9hZFVSTCBcImZpbGU6Ly8je19fZGlybmFtZX0vLi4vanMvI3todG1sfS5odG1sXCJcbiAgICBcbiAgICB3aW4ud2ViQ29udGVudHMub24gJ2RvbS1yZWFkeScgKGV2ZW50KSAtPlxuICAgICAgICAjIGtsb2cgJ3dpbi1yZWFkeScsIGV2ZW50LnNlbmRlci5pZCwgd2luLmlkLCBkYXRhXG4gICAgICAgIHBvc3QudG9XaW4gd2luLmlkLCAnaW5pdERhdGEnIGRhdGEgaWYgZGF0YT9cbiAgICAgICAgd2luLnNob3coKVxuICAgICAgICBcbiAgICB3aW5FdmVudHMgd2luXG4gICAgd2luXG4gICAgICAgIFxucG9zdC5vbiAnbmV3S2FjaGVsJyBvbk5ld0thY2hlbFxuXG5vbkFycmFuZ2UgPSAtPlxuICAgIFxuICAgIHNuYXAgPSAyMFxuICAgIHdhID0gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplXG4gICAgW3N3LCBzaF0gPSBbd2Eud2lkdGgsIHdhLmhlaWdodF1cblxuICAgIGZvciB3IGluIGthY2hlbG4oKVxuICAgICAgICBiID0gdy5nZXRCb3VuZHMoKVxuICAgICAgICBsb2cgTWF0aC5hYnMoYi54ICsgYi53aWR0aCAtIHN3KVxuICAgICAgICBpZiBNYXRoLmFicyhiLngpIDwgc25hcCBcbiAgICAgICAgICAgIGxvZyAnPCcgdy5pZCwgYlxuICAgICAgICBlbHNlIGlmIE1hdGguYWJzKGIueCArIGIud2lkdGggLSBzdykgPCBzbmFwIFxuICAgICAgICAgICAgbG9nICc+JyB3LmlkLCBiXG5cbnBvc3Qub24gJ2FycmFuZ2UnIG9uQXJyYW5nZVxuXG4jIDAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgICBcbiMgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgXG4jIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAwMDAgICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwMDAwICAgMDAwMDAwMDBcblxucmFpc2VkICA9IGZhbHNlXG5yYWlzaW5nID0gZmFsc2VcblxucmFpc2UgPSAod2luKSAtPlxuICAgIHdpbi5zaG93SW5hY3RpdmUoKVxuICAgIHdpbi5mb2N1cygpXG4gICAgXG5oaWRlID0gKHdpbikgLT5cbiAgICB3aW4uaGlkZSgpXG5cbm9uV2luQmx1ciA9IChldmVudCkgLT4gXG4gICAgaWYgZXZlbnQuc2VuZGVyID09IG1haW5XaW4gXG4gICAgICAgIHJhaXNlZCA9IGZhbHNlXG5cbm9uV2luRm9jdXMgPSAoZXZlbnQpIC0+IFxuICAgIGlmIGV2ZW50LnNlbmRlciA9PSBtYWluV2luXG4gICAgICAgIGlmIG5vdCByYWlzZWQgYW5kIG5vdCByYWlzaW5nXG4gICAgICAgICAgICBvblJhaXNlS2FjaGVsbigpXG4gICAgICAgIGVsc2UgaWYgcmFpc2luZ1xuICAgICAgICAgICAgcmFpc2VkID0gdHJ1ZVxuICAgICAgICAgICAgcmFpc2luZyA9IGZhbHNlXG4gICAgXG5vbkhpZGVLYWNoZWxuID0gLT5cbiAgICBcbiAgICBmb3Igd2luIGluIGthY2hlbG4oKVxuICAgICAgICBoaWRlIHdpblxuICAgIHJhaXNlZCA9IGZhbHNlXG5cbm9uUmFpc2VLYWNoZWxuID0gLT5cbiAgICBcbiAgICBpZiByYWlzZWRcbiAgICAgICAgb25IaWRlS2FjaGVsbigpXG4gICAgICAgIHJldHVyblxuICAgIHJhaXNpbmcgPSB0cnVlXG4gICAgZm9yIHdpbiBpbiBrYWNoZWxuKClcbiAgICAgICAgcmFpc2Ugd2luXG4gICAgcmFpc2VkID0gdHJ1ZVxuICAgIHJhaXNlIG1haW5XaW5cblxucG9zdC5vbiAncmFpc2VLYWNoZWxuJyBvblJhaXNlS2FjaGVsbiAgICAgICAgXG5cbnBvc3Qub24gJ3F1aXQnIEthY2hlbEFwcC5xdWl0QXBwXG5cbiMgMDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgXG4jIDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAwMDAgICBcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgICAgICAwMDAgIFxuIyAwMDAgICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgXG5cbm9uRm9jdXNLYWNoZWwgPSAod2luSWQsIGRpcmVjdGlvbikgLT5cbiAgICBzd2l0Y2ggZGlyZWN0aW9uXG4gICAgICAgIHdoZW4gJ2xlZnQnJ3VwJyAgICB0aGVuIHJhaXNlIHJlbFdpbiB3aW5JZCwgLTFcbiAgICAgICAgd2hlbiAncmlnaHQnJ2Rvd24nIHRoZW4gcmFpc2UgcmVsV2luIHdpbklkLCAgMVxuXG5wb3N0Lm9uICdmb2N1c0thY2hlbCcgb25Gb2N1c0thY2hlbFxuICAgICAgICBcbiMga2FjaGVsQ2xvc2VkID0gKGV2ZW50KSAtPiAjIGxvZyAna2FjaGVsQ2xvc2VkJ1xuICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgXG4jIDAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICBcbiMgMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwMCAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwICAgICAgIDAwMCAgXG4jIDAwICAgICAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICBcblxud2lucyAgICAgID0gLT4gQnJvd3NlcldpbmRvdy5nZXRBbGxXaW5kb3dzKCkuc29ydCAoYSxiKSAtPiBhLmlkIC0gYi5pZFxuYWN0aXZlV2luID0gLT4gQnJvd3NlcldpbmRvdy5nZXRGb2N1c2VkV2luZG93KClcbmthY2hlbG4gICA9IC0+IHdpbnMoKS5maWx0ZXIgKHcpIC0+IHcgIT0gbWFpbldpblxud2luV2l0aElkID0gKGlkKSAtPiBCcm93c2VyV2luZG93LmZyb21JZCBpZFxuICAgIFxucmVsV2luID0gKHdpbklkLCBkZWx0YSkgLT5cbiAgICB3bCA9IHdpbnMoKVxuICAgIHcgPSBCcm93c2VyV2luZG93LmZyb21JZCB3aW5JZFxuICAgIHdpID0gd2wuaW5kZXhPZiB3XG4gICAgd2xbKHdsLmxlbmd0aCt3aStkZWx0YSkld2wubGVuZ3RoXVxuIl19
//# sourceURL=../coffee/main.coffee