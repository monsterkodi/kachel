// koffee 1.2.0

/*
00     00   0000000   000  000   000
000   000  000   000  000  0000  000
000000000  000000000  000  000 0 000
000 0 000  000   000  000  000  0000
000   000  000   000  000  000   000
 */
var BrowserWindow, KachelApp, activeWin, app, electron, hide, kachelClosed, kachelSize, kacheln, loadKacheln, mainWin, onFocusKachel, onHideKacheln, onNewKachel, onRaiseKacheln, onWinBlur, onWinFocus, post, prefs, raise, raised, raising, ref, relWin, saveBounds, shortcut, slash, winEvents, winWithId, wins;

ref = require('kxk'), post = ref.post, prefs = ref.prefs, slash = ref.slash, app = ref.app;

electron = require('electron');

BrowserWindow = electron.BrowserWindow;

kachelSize = 150;

mainWin = null;

winEvents = function(win) {
    win.on('closed', kachelClosed);
    win.on('focus', onWinFocus);
    win.on('blur', onWinBlur);
    return win.setHasShadow(false);
};

shortcut = slash.win() && 'ctrl+alt+k' || 'command+alt+k';

KachelApp = new app({
    dir: __dirname,
    pkg: require('../package.json'),
    shortcut: shortcut,
    index: 'mainwin.html',
    icon: '../img/app.ico',
    tray: '../img/menu.png',
    about: '../img/about.png',
    minWidth: 50,
    minHeight: 50,
    maxWidth: 50,
    maxHeight: 50,
    width: 50,
    height: 50,
    resizable: true,
    maximizable: false,
    saveBounds: false,
    onWinReady: function(win) {
        mainWin = win;
        winEvents(win);
        return loadKacheln();
    }
});

loadKacheln = function() {
    var kachelData, kachelId, ref1, results;
    ref1 = prefs.get('kacheln', {});
    results = [];
    for (kachelId in ref1) {
        kachelData = ref1[kachelId];
        results.push(onNewKachel(kachelData));
    }
    return results;
};

onNewKachel = function(arg) {
    var bounds, html, oldWin, ref1, ref2, win, winId;
    html = (ref1 = arg.html) != null ? ref1 : 'default', winId = (ref2 = arg.winId) != null ? ref2 : null;
    if (winId) {
        oldWin = winWithId(winId);
        bounds = oldWin.getBounds();
        oldWin.close();
    }
    win = new electron.BrowserWindow({
        movable: true,
        transparent: true,
        autoHideMenuBar: true,
        frame: false,
        resizable: false,
        maximizable: false,
        minimizable: false,
        fullscreen: false,
        show: false,
        transparent: false,
        fullscreenenable: false,
        backgroundColor: '#181818',
        width: kachelSize,
        height: kachelSize,
        minWidth: kachelSize,
        minHeight: kachelSize,
        maxWidth: kachelSize,
        maxHeight: kachelSize,
        webPreferences: {
            nodeIntegration: true
        }
    });
    if (bounds) {
        win.setBounds(bounds);
    }
    win.loadURL("file://" + __dirname + "/../js/" + html + ".html");
    win.on('ready-to-show', function() {
        return win.show();
    });
    winEvents(win);
    return win;
};

post.on('newKachel', onNewKachel);

raised = false;

raising = false;

raise = function(win) {
    win.showInactive();
    return win.focus();
};

hide = function(win) {
    return win.hide();
};

onWinBlur = function(event) {
    if (event.sender === mainWin) {
        return raised = false;
    }
};

onWinFocus = function(event) {
    if (event.sender === mainWin) {
        if (!raised && !raising) {
            return onRaiseKacheln();
        } else if (raising) {
            raised = true;
            return raising = false;
        }
    }
};

onHideKacheln = function() {
    var i, len, ref1, win;
    ref1 = kacheln();
    for (i = 0, len = ref1.length; i < len; i++) {
        win = ref1[i];
        hide(win);
    }
    return raised = false;
};

onRaiseKacheln = function() {
    var i, len, ref1, win;
    if (raised) {
        onHideKacheln();
        return;
    }
    raising = true;
    ref1 = kacheln();
    for (i = 0, len = ref1.length; i < len; i++) {
        win = ref1[i];
        raise(win);
    }
    raised = true;
    return raise(mainWin);
};

post.on('raiseKacheln', onRaiseKacheln);

post.on('quit', KachelApp.quitApp);

onFocusKachel = function(winId, direction) {
    switch (direction) {
        case 'left':
        case 'up':
            return raise(relWin(winId, -1));
        case 'right':
        case 'down':
            return raise(relWin(winId, 1));
    }
};

post.on('focusKachel', onFocusKachel);

kachelClosed = function(event) {};

saveBounds = function(event) {
    return prefs.save();
};

wins = function() {
    return BrowserWindow.getAllWindows().sort(function(a, b) {
        return a.id - b.id;
    });
};

activeWin = function() {
    return BrowserWindow.getFocusedWindow();
};

kacheln = function() {
    return wins().filter(function(w) {
        return w !== mainWin;
    });
};

winWithId = function(id) {
    return BrowserWindow.fromId(id);
};

relWin = function(winId, delta) {
    var w, wi, wl;
    wl = wins();
    w = BrowserWindow.fromId(winId);
    wi = wl.indexOf(w);
    return wl[(wl.length + wi + delta) % wl.length];
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBLElBQUE7O0FBUUEsTUFBOEIsT0FBQSxDQUFRLEtBQVIsQ0FBOUIsRUFBRSxlQUFGLEVBQVEsaUJBQVIsRUFBZSxpQkFBZixFQUFzQjs7QUFFdEIsUUFBQSxHQUFXLE9BQUEsQ0FBUSxVQUFSOztBQUNYLGFBQUEsR0FBZ0IsUUFBUSxDQUFDOztBQUV6QixVQUFBLEdBQWE7O0FBQ2IsT0FBQSxHQUFVOztBQUVWLFNBQUEsR0FBWSxTQUFDLEdBQUQ7SUFDUixHQUFHLENBQUMsRUFBSixDQUFPLFFBQVAsRUFBaUIsWUFBakI7SUFDQSxHQUFHLENBQUMsRUFBSixDQUFPLE9BQVAsRUFBaUIsVUFBakI7SUFDQSxHQUFHLENBQUMsRUFBSixDQUFPLE1BQVAsRUFBaUIsU0FBakI7V0FDQSxHQUFHLENBQUMsWUFBSixDQUFpQixLQUFqQjtBQUpROztBQU1aLFFBQUEsR0FBVyxLQUFLLENBQUMsR0FBTixDQUFBLENBQUEsSUFBZ0IsWUFBaEIsSUFBZ0M7O0FBRTNDLFNBQUEsR0FBWSxJQUFJLEdBQUosQ0FDUjtJQUFBLEdBQUEsRUFBZ0IsU0FBaEI7SUFDQSxHQUFBLEVBQWdCLE9BQUEsQ0FBUSxpQkFBUixDQURoQjtJQUVBLFFBQUEsRUFBZ0IsUUFGaEI7SUFHQSxLQUFBLEVBQWdCLGNBSGhCO0lBSUEsSUFBQSxFQUFnQixnQkFKaEI7SUFLQSxJQUFBLEVBQWdCLGlCQUxoQjtJQU1BLEtBQUEsRUFBZ0Isa0JBTmhCO0lBT0EsUUFBQSxFQUFnQixFQVBoQjtJQVFBLFNBQUEsRUFBZ0IsRUFSaEI7SUFTQSxRQUFBLEVBQWdCLEVBVGhCO0lBVUEsU0FBQSxFQUFnQixFQVZoQjtJQVdBLEtBQUEsRUFBZ0IsRUFYaEI7SUFZQSxNQUFBLEVBQWdCLEVBWmhCO0lBYUEsU0FBQSxFQUFnQixJQWJoQjtJQWNBLFdBQUEsRUFBZ0IsS0FkaEI7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UjtBQUNMLFFBQUE7SUFBQSxFQUFBLEdBQUssSUFBQSxDQUFBO0lBQ0wsQ0FBQSxHQUFJLGFBQWEsQ0FBQyxNQUFkLENBQXFCLEtBQXJCO0lBQ0osRUFBQSxHQUFLLEVBQUUsQ0FBQyxPQUFILENBQVcsQ0FBWDtXQUNMLEVBQUcsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxNQUFILEdBQVUsRUFBVixHQUFhLEtBQWQsQ0FBQSxHQUFxQixFQUFFLENBQUMsTUFBeEI7QUFKRSIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgMDAwICAgMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDBcbjAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMFxuMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDBcbiMjI1xuXG57IHBvc3QsIHByZWZzLCBzbGFzaCwgYXBwIH0gPSByZXF1aXJlICdreGsnXG5cbmVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5Ccm93c2VyV2luZG93ID0gZWxlY3Ryb24uQnJvd3NlcldpbmRvd1xuXG5rYWNoZWxTaXplID0gMTUwXG5tYWluV2luID0gbnVsbFxuXG53aW5FdmVudHMgPSAod2luKSAtPlxuICAgIHdpbi5vbiAnY2xvc2VkJywga2FjaGVsQ2xvc2VkXG4gICAgd2luLm9uICdmb2N1cycsICBvbldpbkZvY3VzXG4gICAgd2luLm9uICdibHVyJywgICBvbldpbkJsdXJcbiAgICB3aW4uc2V0SGFzU2hhZG93IGZhbHNlXG4gICAgXG5zaG9ydGN1dCA9IHNsYXNoLndpbigpIGFuZCAnY3RybCthbHQraycgb3IgJ2NvbW1hbmQrYWx0K2snXG5cbkthY2hlbEFwcCA9IG5ldyBhcHBcbiAgICBkaXI6ICAgICAgICAgICAgX19kaXJuYW1lXG4gICAgcGtnOiAgICAgICAgICAgIHJlcXVpcmUgJy4uL3BhY2thZ2UuanNvbidcbiAgICBzaG9ydGN1dDogICAgICAgc2hvcnRjdXRcbiAgICBpbmRleDogICAgICAgICAgJ21haW53aW4uaHRtbCdcbiAgICBpY29uOiAgICAgICAgICAgJy4uL2ltZy9hcHAuaWNvJ1xuICAgIHRyYXk6ICAgICAgICAgICAnLi4vaW1nL21lbnUucG5nJ1xuICAgIGFib3V0OiAgICAgICAgICAnLi4vaW1nL2Fib3V0LnBuZydcbiAgICBtaW5XaWR0aDogICAgICAgNTBcbiAgICBtaW5IZWlnaHQ6ICAgICAgNTBcbiAgICBtYXhXaWR0aDogICAgICAgNTBcbiAgICBtYXhIZWlnaHQ6ICAgICAgNTBcbiAgICB3aWR0aDogICAgICAgICAgNTBcbiAgICBoZWlnaHQ6ICAgICAgICAgNTBcbiAgICByZXNpemFibGU6ICAgICAgdHJ1ZVxuICAgIG1heGltaXphYmxlOiAgICBmYWxzZVxuICAgIHNhdmVCb3VuZHM6ICAgICBmYWxzZVxuICAgIG9uV2luUmVhZHk6ICAgICAod2luKSAtPlxuICAgICAgICBtYWluV2luID0gd2luXG4gICAgICAgIHdpbkV2ZW50cyB3aW5cbiAgICAgICAgbG9hZEthY2hlbG4oKVxuICAgICAgICBcbmxvYWRLYWNoZWxuID0gLT5cbiAgICBcbiAgICBmb3Iga2FjaGVsSWQsa2FjaGVsRGF0YSBvZiBwcmVmcy5nZXQgJ2thY2hlbG4nIHt9XG4gICAgICAgICMgbG9nICduZXdLYWNoZWwnLCBrYWNoZWxJZCwga2FjaGVsRGF0YVxuICAgICAgICBvbk5ld0thY2hlbCBrYWNoZWxEYXRhXG5cbiMgMDAwICAgMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAgICBcbiMgMDAwICAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICBcbiMgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAgICAgICAwMDAwMDAwMDAgIDAwMDAwMDAgICAwMDAgICAgICBcbiMgMDAwICAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwICBcblxub25OZXdLYWNoZWwgPSAoaHRtbDonZGVmYXVsdCcsIHdpbklkOiktPlxuXG4gICAgaWYgd2luSWRcbiAgICAgICAgb2xkV2luID0gd2luV2l0aElkIHdpbklkXG4gICAgICAgIGJvdW5kcyA9IG9sZFdpbi5nZXRCb3VuZHMoKVxuICAgICAgICBvbGRXaW4uY2xvc2UoKVxuICAgIFxuICAgIHdpbiA9IG5ldyBlbGVjdHJvbi5Ccm93c2VyV2luZG93XG4gICAgICAgIFxuICAgICAgICBtb3ZhYmxlOiAgICAgICAgIHRydWVcbiAgICAgICAgdHJhbnNwYXJlbnQ6ICAgICB0cnVlXG4gICAgICAgIGF1dG9IaWRlTWVudUJhcjogdHJ1ZVxuICAgICAgICBmcmFtZTogICAgICAgICAgIGZhbHNlXG4gICAgICAgIHJlc2l6YWJsZTogICAgICAgZmFsc2VcbiAgICAgICAgbWF4aW1pemFibGU6ICAgICBmYWxzZVxuICAgICAgICBtaW5pbWl6YWJsZTogICAgIGZhbHNlXG4gICAgICAgIGZ1bGxzY3JlZW46ICAgICAgZmFsc2VcbiAgICAgICAgc2hvdzogICAgICAgICAgICBmYWxzZVxuICAgICAgICB0cmFuc3BhcmVudDogICAgIGZhbHNlXG4gICAgICAgIGZ1bGxzY3JlZW5lbmFibGU6IGZhbHNlXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMxODE4MTgnXG4gICAgICAgIHdpZHRoOiAgICAgICAgICAga2FjaGVsU2l6ZVxuICAgICAgICBoZWlnaHQ6ICAgICAgICAgIGthY2hlbFNpemVcbiAgICAgICAgbWluV2lkdGg6ICAgICAgICBrYWNoZWxTaXplXG4gICAgICAgIG1pbkhlaWdodDogICAgICAga2FjaGVsU2l6ZVxuICAgICAgICBtYXhXaWR0aDogICAgICAgIGthY2hlbFNpemVcbiAgICAgICAgbWF4SGVpZ2h0OiAgICAgICBrYWNoZWxTaXplXG4gICAgICAgIHdlYlByZWZlcmVuY2VzOlxuICAgICAgICAgICAgbm9kZUludGVncmF0aW9uOiB0cnVlXG5cbiAgICBpZiBib3VuZHNcbiAgICAgICAgd2luLnNldEJvdW5kcyBib3VuZHNcbiAgICAgICAgICAgIFxuICAgIHdpbi5sb2FkVVJMIFwiZmlsZTovLyN7X19kaXJuYW1lfS8uLi9qcy8je2h0bWx9Lmh0bWxcIlxuICAgIHdpbi5vbiAncmVhZHktdG8tc2hvdycsIC0+IHdpbi5zaG93KClcbiAgICB3aW5FdmVudHMgd2luXG4gICAgd2luXG4gICAgICAgIFxucG9zdC5vbiAnbmV3S2FjaGVsJywgb25OZXdLYWNoZWxcblxuIyAwMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwMDAwMDBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgXG4jIDAwMDAwMDAgICAgMDAwMDAwMDAwICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAwXG5cbnJhaXNlZCAgPSBmYWxzZVxucmFpc2luZyA9IGZhbHNlXG5cbnJhaXNlID0gKHdpbikgLT5cbiAgICB3aW4uc2hvd0luYWN0aXZlKClcbiAgICB3aW4uZm9jdXMoKVxuICAgIFxuaGlkZSA9ICh3aW4pIC0+XG4gICAgd2luLmhpZGUoKVxuXG5vbldpbkJsdXIgPSAoZXZlbnQpIC0+IFxuICAgIGlmIGV2ZW50LnNlbmRlciA9PSBtYWluV2luIFxuICAgICAgICByYWlzZWQgPSBmYWxzZVxuXG5vbldpbkZvY3VzID0gKGV2ZW50KSAtPiBcbiAgICBpZiBldmVudC5zZW5kZXIgPT0gbWFpbldpblxuICAgICAgICBpZiBub3QgcmFpc2VkIGFuZCBub3QgcmFpc2luZ1xuICAgICAgICAgICAgb25SYWlzZUthY2hlbG4oKVxuICAgICAgICBlbHNlIGlmIHJhaXNpbmdcbiAgICAgICAgICAgIHJhaXNlZCA9IHRydWVcbiAgICAgICAgICAgIHJhaXNpbmcgPSBmYWxzZVxuICAgIFxub25IaWRlS2FjaGVsbiA9IC0+XG4gICAgXG4gICAgZm9yIHdpbiBpbiBrYWNoZWxuKClcbiAgICAgICAgaGlkZSB3aW5cbiAgICByYWlzZWQgPSBmYWxzZVxuXG5vblJhaXNlS2FjaGVsbiA9IC0+XG4gICAgXG4gICAgaWYgcmFpc2VkXG4gICAgICAgIG9uSGlkZUthY2hlbG4oKVxuICAgICAgICByZXR1cm5cbiAgICByYWlzaW5nID0gdHJ1ZVxuICAgIGZvciB3aW4gaW4ga2FjaGVsbigpXG4gICAgICAgIHJhaXNlIHdpblxuICAgIHJhaXNlZCA9IHRydWVcbiAgICByYWlzZSBtYWluV2luXG5cbnBvc3Qub24gJ3JhaXNlS2FjaGVsbicgb25SYWlzZUthY2hlbG4gICAgICAgIFxuXG5wb3N0Lm9uICdxdWl0JyBLYWNoZWxBcHAucXVpdEFwcFxuXG4jIDAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICBcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuIyAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgXG4jIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgICAgICAgMDAwICBcbiMgMDAwICAgICAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuXG5vbkZvY3VzS2FjaGVsID0gKHdpbklkLCBkaXJlY3Rpb24pIC0+XG4gICAgc3dpdGNoIGRpcmVjdGlvblxuICAgICAgICB3aGVuICdsZWZ0Jyd1cCcgICAgdGhlbiByYWlzZSByZWxXaW4gd2luSWQsIC0xXG4gICAgICAgIHdoZW4gJ3JpZ2h0Jydkb3duJyB0aGVuIHJhaXNlIHJlbFdpbiB3aW5JZCwgIDFcblxucG9zdC5vbiAnZm9jdXNLYWNoZWwnIG9uRm9jdXNLYWNoZWxcbiAgICAgICAgXG5rYWNoZWxDbG9zZWQgPSAoZXZlbnQpIC0+ICMgbG9nICdrYWNoZWxDbG9zZWQnXG5zYXZlQm91bmRzICAgPSAoZXZlbnQpIC0+IHByZWZzLnNhdmUoKSAjIGxvZyAnc2F2ZUJvdW5kcycsIGV2ZW50LnNlbmRlci5pZFxuICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgXG4jIDAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICBcbiMgMDAwMDAwMDAwICAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwMCAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwICAgICAgIDAwMCAgXG4jIDAwICAgICAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICBcblxud2lucyAgICAgID0gLT4gQnJvd3NlcldpbmRvdy5nZXRBbGxXaW5kb3dzKCkuc29ydCAoYSxiKSAtPiBhLmlkIC0gYi5pZFxuYWN0aXZlV2luID0gLT4gQnJvd3NlcldpbmRvdy5nZXRGb2N1c2VkV2luZG93KClcbmthY2hlbG4gICA9IC0+IHdpbnMoKS5maWx0ZXIgKHcpIC0+IHcgIT0gbWFpbldpblxud2luV2l0aElkID0gKGlkKSAtPiBCcm93c2VyV2luZG93LmZyb21JZCBpZFxuICAgIFxucmVsV2luID0gKHdpbklkLCBkZWx0YSkgLT5cbiAgICB3bCA9IHdpbnMoKVxuICAgIHcgPSBCcm93c2VyV2luZG93LmZyb21JZCB3aW5JZFxuICAgIHdpID0gd2wuaW5kZXhPZiB3XG4gICAgd2xbKHdsLmxlbmd0aCt3aStkZWx0YSkld2wubGVuZ3RoXVxuIl19
//# sourceURL=../coffee/main.coffee