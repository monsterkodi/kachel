// koffee 1.3.0

/*
0000000     0000000   000   000  000   000  0000000     0000000
000   000  000   000  000   000  0000  000  000   000  000     
0000000    000   000  000   000  000 0 000  000   000  0000000 
000   000  000   000  000   000  000  0000  000   000       000
0000000     0000000    0000000   000   000  0000000    0000000
 */
var Bounds, clamp, electron, klog, post, ref;

ref = require('kxk'), post = ref.post, clamp = ref.clamp, klog = ref.klog;

electron = require('electron');

Bounds = (function() {
    function Bounds() {}

    Bounds.setBounds = function(kachel, b) {
        kachel.setBounds(b);
        return post.toWin(kachel.id, 'saveBounds');
    };

    Bounds.sw = function() {
        return electron.screen.getPrimaryDisplay().workAreaSize.width;
    };

    Bounds.sh = function() {
        return electron.screen.getPrimaryDisplay().workAreaSize.height;
    };

    Bounds.sy = function() {
        return electron.screen.getPrimaryDisplay().workArea.y;
    };

    Bounds.getInfos = function(kacheln) {
        var index, infos, maxX, maxY, minX, minY;
        index = 0;
        minX = minY = 9999;
        maxX = maxY = 0;
        infos = kacheln.map((function(_this) {
            return function(k) {
                var b;
                b = _this.validBounds(k);
                minX = Math.min(minX, b.x);
                minY = Math.min(minY, b.y);
                maxX = Math.max(maxX, b.x + b.width);
                maxY = Math.max(maxY, b.y + b.height);
                return {
                    kachel: k,
                    index: index++,
                    bounds: b
                };
            };
        })(this));
        infos.sort((function(_this) {
            return function(a, b) {
                return _this.borderDist(a.bounds) - _this.borderDist(b.bounds);
            };
        })(this));
        infos.kachelBounds = {
            x: minX,
            y: minY,
            width: maxX - minX,
            height: maxY - minY
        };
        return infos;
    };

    Bounds.validBounds = function(kachel) {
        return this.onScreen(kachel.getBounds());
    };

    Bounds.onScreen = function(b) {
        var sh, sw, sy;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        b.x = clamp(0, sw - b.width, b.x);
        b.y = clamp(0, sh - b.height, b.y);
        if (b.x + b.width > sw - b.width) {
            b.x = sw - b.width;
        }
        if (b.y + b.height > sy + sh - b.height) {
            b.y = sy + sh - b.height;
        }
        if (b.x < b.width) {
            b.x = 0;
        }
        if (b.y - sy < b.height) {
            b.y = sy;
        }
        return b;
    };

    Bounds.isOnScreen = function(b) {
        var sh, sw, sy;
        if (b.y < 0 || b.x < 0) {
            return false;
        }
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        if (b.x + b.width > sw) {
            return false;
        }
        if (b.y + b.height > sy + sh) {
            return false;
        }
        return true;
    };

    Bounds.overlap = function(a, b) {
        if (!a || !b) {
            return false;
        }
        return !(a.x > b.x + b.width - 1 || b.x > a.x + a.width - 1 || a.y > b.y + b.height - 1 || b.y > a.y + a.height - 1);
    };

    Bounds.overlapInfo = function(infos, b) {
        var i, info, len;
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (this.overlap(info.bounds, b)) {
                return info;
            }
        }
    };

    Bounds.borderDist = function(b) {
        var dx, dy;
        dx = b.x < this.sw() / 2 ? b.x : this.sw() - (b.x + b.width);
        dy = b.y < this.sh() / 2 ? b.y : this.sh() - (b.y + b.height);
        return Math.min(dx, dy);
    };

    Bounds.contains = function(b, p) {
        return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;
    };

    Bounds.kachelAtPos = function(infos, p) {
        var i, k, len;
        for (i = 0, len = infos.length; i < len; i++) {
            k = infos[i];
            if (this.contains(k.bounds, p)) {
                return k;
            }
        }
    };

    Bounds.gapRight = function(a, b) {
        return b.x - (a.x + a.width);
    };

    Bounds.gapLeft = function(a, b) {
        return a.x - (b.x + b.width);
    };

    Bounds.gapUp = function(a, b) {
        return a.y - (b.y + b.height);
    };

    Bounds.gapDown = function(a, b) {
        return b.y - (a.y + a.height);
    };

    Bounds.isCloseNeighbor = function(bounds, info, dir) {
        var ref1, ref2, ref3, ref4;
        switch (dir) {
            case 'right':
                return (0 <= (ref1 = this.gapRight(bounds, info.bounds)) && ref1 < bounds.width);
            case 'left':
                return (0 <= (ref2 = this.gapLeft(bounds, info.bounds)) && ref2 < bounds.width);
            case 'down':
                return (0 <= (ref3 = this.gapDown(bounds, info.bounds)) && ref3 < bounds.height);
            case 'up':
                return (0 <= (ref4 = this.gapUp(bounds, info.bounds)) && ref4 < bounds.height);
        }
    };

    Bounds.closeNeighbor = function(infos, kachel, dir) {
        var i, info, kb, len;
        kb = kachel.getBounds();
        infos.sort(function(a, b) {
            switch (dir) {
                case 'left':
                case 'right':
                    return Math.abs(a.bounds.y - kb.y) - Math.abs(b.bounds.y - kb.y);
                case 'up':
                case 'down':
                    return Math.abs(a.bounds.x - kb.x) - Math.abs(b.bounds.x - kb.x);
            }
        });
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.isCloseNeighbor(kb, info, dir)) {
                return info;
            }
        }
    };

    Bounds.nextNeighbor = function(infos, kachel, dir) {
        var kb, neighbor;
        if (neighbor = this.closeNeighbor(infos, kachel, dir)) {
            kb = kachel.getBounds();
            switch (dir) {
                case 'left':
                case 'right':
                    if (neighbor.bounds.y === kb.y) {
                        return neighbor;
                    }
                    break;
                case 'up':
                case 'down':
                    if (neighbor.bounds.x === kb.x) {
                        return neighbor;
                    }
            }
        }
    };

    Bounds.snap = function(infos, kachel, b) {
        var horz, i, info, len, n, sh, sw, sy, vert;
        if (b != null) {
            b;
        } else {
            b = kachel.getBounds();
        }
        horz = false;
        vert = false;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        if (b.x < 0 || b.x < 72) {
            horz = true;
            b.x = 0;
        } else if (b.x + b.width > sw || b.x + b.width > sw - 72) {
            horz = true;
            b.x = sw - b.width;
        }
        if (b.y < 0 || b.y < 72) {
            vert = true;
            b.y = 0;
        } else if (b.y + b.height > sh + sy || b.y + b.height > sh + sy - 72) {
            vert = true;
            b.y = sh + sy - b.height;
        }
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.overlap(b, info.bounds)) {
                b.y = info.bounds.y + info.bounds.height;
            }
        }
        if (!vert) {
            if (n = this.closeNeighbor(infos, kachel, 'up')) {
                b.y = n.bounds.y + n.bounds.height;
            } else if (n = this.closeNeighbor(infos, kachel, 'down')) {
                b.y = n.bounds.y - b.height;
            }
        }
        if (!horz) {
            if (n = this.closeNeighbor(infos, kachel, 'right')) {
                b.x = n.bounds.x - b.width;
            } else if (n = this.closeNeighbor(infos, kachel, 'left')) {
                b.x = n.bounds.x + n.bounds.width;
            }
        }
        return b;
    };

    return Bounds;

})();

module.exports = Bounds;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm91bmRzLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUF3QixPQUFBLENBQVEsS0FBUixDQUF4QixFQUFFLGVBQUYsRUFBUSxpQkFBUixFQUFlOztBQUVmLFFBQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFFTDs7O0lBRUYsTUFBQyxDQUFBLFNBQUQsR0FBWSxTQUFDLE1BQUQsRUFBUyxDQUFUO1FBQ1IsTUFBTSxDQUFDLFNBQVAsQ0FBaUIsQ0FBakI7ZUFDQSxJQUFJLENBQUMsS0FBTCxDQUFXLE1BQU0sQ0FBQyxFQUFsQixFQUFzQixZQUF0QjtJQUZROztJQUlaLE1BQUMsQ0FBQSxFQUFELEdBQUssU0FBQTtlQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsaUJBQWhCLENBQUEsQ0FBbUMsQ0FBQyxZQUFZLENBQUM7SUFBcEQ7O0lBQ0wsTUFBQyxDQUFBLEVBQUQsR0FBSyxTQUFBO2VBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIsQ0FBQSxDQUFtQyxDQUFDLFlBQVksQ0FBQztJQUFwRDs7SUFDTCxNQUFDLENBQUEsRUFBRCxHQUFLLFNBQUE7ZUFBRyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFoQixDQUFBLENBQW1DLENBQUMsUUFBUSxDQUFDO0lBQWhEOztJQVFMLE1BQUMsQ0FBQSxRQUFELEdBQVcsU0FBQyxPQUFEO0FBRVAsWUFBQTtRQUFBLEtBQUEsR0FBUTtRQUNSLElBQUEsR0FBTyxJQUFBLEdBQU87UUFDZCxJQUFBLEdBQU8sSUFBQSxHQUFPO1FBRWQsS0FBQSxHQUFRLE9BQU8sQ0FBQyxHQUFSLENBQVksQ0FBQSxTQUFBLEtBQUE7bUJBQUEsU0FBQyxDQUFEO0FBRWhCLG9CQUFBO2dCQUFBLENBQUEsR0FBSSxLQUFDLENBQUEsV0FBRCxDQUFhLENBQWI7Z0JBQ0osSUFBQSxHQUFPLElBQUksQ0FBQyxHQUFMLENBQVMsSUFBVCxF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YUFBRCxDQUFlLEtBQWYsRUFBc0IsTUFBdEIsRUFBOEIsTUFBOUIsQ0FBUDtnQkFDRCxDQUFDLENBQUMsQ0FBRixHQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBVCxHQUFhLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFEM0I7YUFIVDs7ZUFLQTtJQXpDRzs7Ozs7O0FBMkNYLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMDAwMDAwICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIFxuMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgICAgICAwMDBcbjAwMDAwMDAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwIFxuIyMjXG5cbnsgcG9zdCwgY2xhbXAsIGtsb2cgfSA9IHJlcXVpcmUgJ2t4aydcblxuZWxlY3Ryb24gPSByZXF1aXJlICdlbGVjdHJvbidcblxuY2xhc3MgQm91bmRzXG5cbiAgICBAc2V0Qm91bmRzOiAoa2FjaGVsLCBiKSAtPlxuICAgICAgICBrYWNoZWwuc2V0Qm91bmRzIGJcbiAgICAgICAgcG9zdC50b1dpbiBrYWNoZWwuaWQsICdzYXZlQm91bmRzJ1xuICAgIFxuICAgIEBzdzogLT4gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplLndpZHRoXG4gICAgQHNoOiAtPiBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUuaGVpZ2h0XG4gICAgQHN5OiAtPiBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYS55XG5cbiAgICAjIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwICAwMDAgMCAwMDAgIDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAgMDAwICAwMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAgICAgIDAwMCAgXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgIFxuICAgIEBnZXRJbmZvczogKGthY2hlbG4pIC0+XG4gICAgICAgIFxuICAgICAgICBpbmRleCA9IDBcbiAgICAgICAgbWluWCA9IG1pblkgPSA5OTk5XG4gICAgICAgIG1heFggPSBtYXhZID0gMFxuICAgICAgICBcbiAgICAgICAgaW5mb3MgPSBrYWNoZWxuLm1hcCAoaykgPT4gXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGIgPSBAdmFsaWRCb3VuZHMga1xuICAgICAgICAgICAgbWluWCA9IE1hdGgubWluIG1pblgsIGIueFxuICAgICAgICAgICAgbWluWSA9IE1hdGgubWluIG1pblksIGIueVxuICAgICAgICAgICAgbWF4WCA9IE1hdGgubWF4IG1heFgsIGIueCtiLndpZHRoXG4gICAgICAgICAgICBtYXhZID0gTWF0aC5tYXggbWF4WSwgYi55K2IuaGVpZ2h0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGthY2hlbDoga1xuICAgICAgICAgICAgaW5kZXg6ICBpbmRleCsrXG4gICAgICAgICAgICBib3VuZHM6IGJcbiAgICAgICAgICAgIFxuICAgICAgICBpbmZvcy5zb3J0IChhLGIpID0+XG4gICAgICAgICAgICBAYm9yZGVyRGlzdChhLmJvdW5kcykgLSBAYm9yZGVyRGlzdChiLmJvdW5kcylcblxuICAgICAgICBpbmZvcy5rYWNoZWxCb3VuZHMgPSBcbiAgICAgICAgICAgIHg6ICAgICAgbWluWFxuICAgICAgICAgICAgeTogICAgICBtaW5ZXG4gICAgICAgICAgICB3aWR0aDogIG1heFgtbWluWFxuICAgICAgICAgICAgaGVpZ2h0OiBtYXhZLW1pbllcbiAgICAgICAgICAgIFxuICAgICAgICBpbmZvc1xuICAgIFxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMDAgIDAwMCAgXG4gICAgIyAwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIFxuICAgICMgICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAwMDAwICBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgQHZhbGlkQm91bmRzOiAoa2FjaGVsKSAtPiBAb25TY3JlZW4ga2FjaGVsLmdldEJvdW5kcygpXG4gICAgICAgIFxuICAgIEBvblNjcmVlbjogKGIpIC0+XG4gICAgICAgIFxuICAgICAgICBzdyA9IEBzdygpXG4gICAgICAgIHNoID0gQHNoKClcbiAgICAgICAgc3kgPSBAc3koKVxuICAgICAgICBcbiAgICAgICAgYi54ID0gY2xhbXAgMCwgc3cgLSBiLndpZHRoLCAgYi54XG4gICAgICAgIGIueSA9IGNsYW1wIDAsIHNoIC0gYi5oZWlnaHQsIGIueVxuICAgICAgICBcbiAgICAgICAgaWYgYi54ICsgYi53aWR0aCAgPiBzdyAtIGIud2lkdGggIHRoZW4gYi54ID0gc3ctYi53aWR0aFxuICAgICAgICBpZiBiLnkgKyBiLmhlaWdodCA+IHN5K3NoIC0gYi5oZWlnaHQgdGhlbiBiLnkgPSBzeStzaC1iLmhlaWdodFxuICAgICAgICBpZiBiLnggICAgICA8IGIud2lkdGggIHRoZW4gYi54ID0gMFxuICAgICAgICBpZiBiLnkgLSBzeSA8IGIuaGVpZ2h0IHRoZW4gYi55ID0gc3lcbiAgICAgICAgXG4gICAgICAgIGJcbiAgICAgICAgXG4gICAgQGlzT25TY3JlZW46IChiKSAtPlxuICAgICAgICBcbiAgICAgICAgaWYgYi55IDwgMCBvciBiLnggPCAwIHRoZW4gcmV0dXJuIGZhbHNlXG4gICAgICAgIFxuICAgICAgICBzdyA9IEBzdygpXG4gICAgICAgIHNoID0gQHNoKClcbiAgICAgICAgc3kgPSBAc3koKVxuICAgICAgICBcbiAgICAgICAgaWYgYi54ICsgYi53aWR0aCAgPiBzdyB0aGVuIHJldHVybiBmYWxzZVxuICAgICAgICBpZiBiLnkgKyBiLmhlaWdodCA+IHN5K3NoIHRoZW4gcmV0dXJuIGZhbHNlXG4gICAgICAgIHRydWVcbiAgICAgICAgXG4gICAgIyAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgIDAwMCAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAgICAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgIFxuICAgICMgIDAwMDAwMDAgICAgICAgMCAgICAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcbiAgICBcbiAgICBAb3ZlcmxhcDogKGEsYikgLT5cbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBhIG9yIG5vdCBiXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgbm90IChhLnggPiBiLngrYi53aWR0aC0xICBvclxuICAgICAgICAgICAgIGIueCA+IGEueCthLndpZHRoLTEgIG9yXG4gICAgICAgICAgICAgYS55ID4gYi55K2IuaGVpZ2h0LTEgb3JcbiAgICAgICAgICAgICBiLnkgPiBhLnkrYS5oZWlnaHQtMSlcbiAgICAgICAgICAgICBcbiAgICBAb3ZlcmxhcEluZm86IChpbmZvcywgYikgLT5cbiAgICAgICAgXG4gICAgICAgIGZvciBpbmZvIGluIGluZm9zXG4gICAgICAgICAgICBpZiBAb3ZlcmxhcCBpbmZvLmJvdW5kcywgYlxuICAgICAgICAgICAgICAgIHJldHVybiBpbmZvXG4gICAgICAgICAgICAgXG4gICAgQGJvcmRlckRpc3Q6IChiKSAtPlxuICAgICAgICBcbiAgICAgICAgZHggPSBpZiBiLnggPCBAc3coKS8yIHRoZW4gYi54IGVsc2UgQHN3KCkgLSAoYi54ICsgYi53aWR0aClcbiAgICAgICAgZHkgPSBpZiBiLnkgPCBAc2goKS8yIHRoZW4gYi55IGVsc2UgQHNoKCkgLSAoYi55ICsgYi5oZWlnaHQpXG4gICAgICAgIE1hdGgubWluIGR4LCBkeVxuICAgICAgXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgICAgICAwMDAgIFxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICBcbiAgICBcbiAgICBAY29udGFpbnM6IChiLCBwKSAtPlxuICAgICAgICBcbiAgICAgICAgcC54ID49IGIueCBhbmQgcC54IDw9IGIueCtiLndpZHRoIGFuZCBwLnkgPj0gYi55IGFuZCBwLnkgPD0gYi55K2IuaGVpZ2h0XG4gICAgICAgIFxuICAgIEBrYWNoZWxBdFBvczogKGluZm9zLCBwKSAtPlxuICAgICAgICBcbiAgICAgICAgZm9yIGsgaW4gaW5mb3NcbiAgICAgICAgICAgIHJldHVybiBrIGlmIEBjb250YWlucyBrLmJvdW5kcywgcFxuICAgICAgICAgICAgXG4gICAgQGdhcFJpZ2h0OiAoYSwgYikgLT4gYi54IC0gKGEueCArIGEud2lkdGgpXG4gICAgQGdhcExlZnQ6ICAoYSwgYikgLT4gYS54IC0gKGIueCArIGIud2lkdGgpXG4gICAgQGdhcFVwOiAgICAoYSwgYikgLT4gYS55IC0gKGIueSArIGIuaGVpZ2h0KVxuICAgIEBnYXBEb3duOiAgKGEsIGIpIC0+IGIueSAtIChhLnkgKyBhLmhlaWdodClcbiAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwMDAwMDAgICBcbiAgICAjIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAwMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuICAgIFxuICAgIEBpc0Nsb3NlTmVpZ2hib3I6IChib3VuZHMsIGluZm8sIGRpcikgLT5cbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCBkaXJcbiAgICAgICAgICAgIHdoZW4gJ3JpZ2h0JyB0aGVuIHJldHVybiAwIDw9IEBnYXBSaWdodChib3VuZHMsIGluZm8uYm91bmRzKSA8IGJvdW5kcy53aWR0aFxuICAgICAgICAgICAgd2hlbiAnbGVmdCcgIHRoZW4gcmV0dXJuIDAgPD0gQGdhcExlZnQoIGJvdW5kcywgaW5mby5ib3VuZHMpIDwgYm91bmRzLndpZHRoXG4gICAgICAgICAgICB3aGVuICdkb3duJyAgdGhlbiByZXR1cm4gMCA8PSBAZ2FwRG93biggYm91bmRzLCBpbmZvLmJvdW5kcykgPCBib3VuZHMuaGVpZ2h0XG4gICAgICAgICAgICB3aGVuICd1cCcgICAgdGhlbiByZXR1cm4gMCA8PSBAZ2FwVXAoICAgYm91bmRzLCBpbmZvLmJvdW5kcykgPCBib3VuZHMuaGVpZ2h0XG4gICAgICAgIFxuICAgIEBjbG9zZU5laWdoYm9yOiAoaW5mb3MsIGthY2hlbCwgZGlyKSAtPlxuICAgICAgICBcbiAgICAgICAga2IgPSBrYWNoZWwuZ2V0Qm91bmRzKClcbiAgICAgICAgXG4gICAgICAgIGluZm9zLnNvcnQgKGEsYikgLT4gXG4gICAgICAgICAgICBzd2l0Y2ggZGlyXG4gICAgICAgICAgICAgICAgd2hlbiAnbGVmdCcncmlnaHQnIHRoZW4gTWF0aC5hYnMoYS5ib3VuZHMueSAtIGtiLnkpIC0gTWF0aC5hYnMoYi5ib3VuZHMueSAtIGtiLnkpXG4gICAgICAgICAgICAgICAgd2hlbiAndXAnJ2Rvd24nICAgIHRoZW4gTWF0aC5hYnMoYS5ib3VuZHMueCAtIGtiLngpIC0gTWF0aC5hYnMoYi5ib3VuZHMueCAtIGtiLngpXG4gICAgICAgIFxuICAgICAgICBmb3IgaW5mbyBpbiBpbmZvc1xuICAgICAgICAgICAgY29udGludWUgaWYgaW5mby5rYWNoZWwgPT0ga2FjaGVsXG4gICAgICAgICAgICBpZiBAaXNDbG9zZU5laWdoYm9yIGtiLCBpbmZvLCBkaXJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5mbyBcblxuICAgIEBuZXh0TmVpZ2hib3I6IChpbmZvcywga2FjaGVsLCBkaXIpIC0+XG4gICAgICAgIFxuICAgICAgICBpZiBuZWlnaGJvciA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsIGRpclxuICAgICAgICAgICAga2IgPSBrYWNoZWwuZ2V0Qm91bmRzKClcbiAgICAgICAgICAgIHN3aXRjaCBkaXJcbiAgICAgICAgICAgICAgICB3aGVuICdsZWZ0JydyaWdodCcgdGhlbiByZXR1cm4gbmVpZ2hib3IgaWYgbmVpZ2hib3IuYm91bmRzLnkgPT0ga2IueSAgICBcbiAgICAgICAgICAgICAgICB3aGVuICd1cCcnZG93bicgICAgdGhlbiByZXR1cm4gbmVpZ2hib3IgaWYgbmVpZ2hib3IuYm91bmRzLnggPT0ga2IueCAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAjICAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICBcbiAgICAjIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAgICBcbiAgICAjICAgICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcbiAgICAjIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcbiAgICBcbiAgICBAc25hcDogKGluZm9zLCBrYWNoZWwsIGIpIC0+XG4gICAgICAgIFxuICAgICAgICBiID89IGthY2hlbC5nZXRCb3VuZHMoKVxuICAgICAgICBcbiAgICAgICAgaG9yeiA9IGZhbHNlXG4gICAgICAgIHZlcnQgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgc3cgPSBAc3coKVxuICAgICAgICBzaCA9IEBzaCgpXG4gICAgICAgIHN5ID0gQHN5KClcbiAgICAgICAgXG4gICAgICAgIGlmIGIueCA8IDAgb3IgYi54IDwgNzJcbiAgICAgICAgICAgIGhvcnogPSB0cnVlXG4gICAgICAgICAgICBiLnggPSAwXG4gICAgICAgIGVsc2UgaWYgYi54ICsgYi53aWR0aCA+IHN3IG9yIGIueCArIGIud2lkdGggPiBzdyAtIDcyXG4gICAgICAgICAgICBob3J6ID0gdHJ1ZVxuICAgICAgICAgICAgYi54ID0gc3cgLSBiLndpZHRoXG5cbiAgICAgICAgaWYgYi55IDwgMCBvciBiLnkgPCA3MlxuICAgICAgICAgICAgdmVydCA9IHRydWVcbiAgICAgICAgICAgIGIueSA9IDBcbiAgICAgICAgZWxzZSBpZiBiLnkgKyBiLmhlaWdodCA+IHNoK3N5IG9yIGIueSArIGIuaGVpZ2h0ID4gc2grc3kgLSA3MlxuICAgICAgICAgICAgdmVydCA9IHRydWVcbiAgICAgICAgICAgIGIueSA9IHNoK3N5IC0gYi5oZWlnaHRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgZm9yIGluZm8gaW4gaW5mb3NcbiAgICAgICAgICAgIGNvbnRpbnVlIGlmIGluZm8ua2FjaGVsID09IGthY2hlbFxuICAgICAgICAgICAgaWYgQG92ZXJsYXAgYiwgaW5mby5ib3VuZHNcbiAgICAgICAgICAgICAgICBiLnkgPSBpbmZvLmJvdW5kcy55ICsgaW5mby5ib3VuZHMuaGVpZ2h0XG4gICAgICAgIFxuICAgICAgICBpZiBub3QgdmVydFxuICAgICAgICAgICAgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICd1cCdcbiAgICAgICAgICAgICAgICBiLnkgPSBuLmJvdW5kcy55ICsgbi5ib3VuZHMuaGVpZ2h0XG4gICAgICAgICAgICBlbHNlIGlmIG4gPSBAY2xvc2VOZWlnaGJvciBpbmZvcywga2FjaGVsLCAnZG93bidcbiAgICAgICAgICAgICAgICBiLnkgPSBuLmJvdW5kcy55IC0gYi5oZWlnaHRcblxuICAgICAgICBpZiBub3QgaG9yelxuICAgICAgICAgICAgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICdyaWdodCdcbiAgICAgICAgICAgICAgICBiLnggPSBuLmJvdW5kcy54IC0gYi53aWR0aFxuICAgICAgICAgICAgZWxzZSBpZiBuID0gQGNsb3NlTmVpZ2hib3IgaW5mb3MsIGthY2hlbCwgJ2xlZnQnXG4gICAgICAgICAgICAgICAgYi54ID0gbi5ib3VuZHMueCArIG4uYm91bmRzLndpZHRoXG4gICAgICAgIGJcbiAgICAgICAgICAgICAgICBcbm1vZHVsZS5leHBvcnRzID0gQm91bmRzXG4iXX0=
//# sourceURL=../coffee/bounds.coffee