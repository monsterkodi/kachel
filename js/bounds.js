// koffee 1.3.0

/*
0000000     0000000   000   000  000   000  0000000     0000000
000   000  000   000  000   000  0000  000  000   000  000     
0000000    000   000  000   000  000 0 000  000   000  0000000 
000   000  000   000  000   000  000  0000  000   000       000
0000000     0000000    0000000   000   000  0000000    0000000
 */
var Bounds, clamp, electron, klog, post, ref;

ref = require('kxk'), post = ref.post, clamp = ref.clamp, klog = ref.klog;

electron = require('electron');

Bounds = (function() {
    function Bounds() {}

    Bounds.sw = function() {
        return electron.screen.getPrimaryDisplay().workAreaSize.width;
    };

    Bounds.sh = function() {
        return electron.screen.getPrimaryDisplay().workAreaSize.height;
    };

    Bounds.sy = function() {
        return electron.screen.getPrimaryDisplay().workArea.y;
    };

    Bounds.onScreen = function(b) {
        var sh, sw, sy;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        b.x = clamp(0, sw - b.width, b.x);
        b.y = clamp(0, sh - b.height, b.y);
        if (b.x + b.width > sw - b.width) {
            b.x = sw - b.width;
        }
        if (b.y + b.height > sh - b.height) {
            b.y = sh - b.height;
        }
        if (b.x < b.width) {
            b.x = 0;
        }
        if (b.y - sy < b.height) {
            b.y = sy;
        }
        return b;
    };

    Bounds.overlap = function(a, b) {
        return !(a.x > b.x + b.width || b.x > a.x + a.width || a.y > b.y + b.height || b.y > a.y + a.height);
    };

    Bounds.borderDist = function(b) {
        var dx, dy;
        dx = b.x < this.sw() / 2 ? b.x : this.sw() - (b.x + b.width);
        dy = b.y < this.sh() / 2 ? b.y : this.sh() - (b.y + b.height);
        return Math.min(dx, dy);
    };

    Bounds.getInfos = function(kacheln) {
        var index, infos;
        index = 0;
        infos = kacheln.map((function(_this) {
            return function(k) {
                return {
                    kachel: k,
                    index: index++,
                    bounds: _this.onScreen(k.getBounds())
                };
            };
        })(this));
        infos.sort((function(_this) {
            return function(a, b) {
                return _this.borderDist(a.bounds) - _this.borderDist(b.bounds);
            };
        })(this));
        return infos;
    };

    Bounds.gapRight = function(a, b) {
        return b.x - (a.x + a.width);
    };

    Bounds.gapLeft = function(a, b) {
        return a.x - (b.x + b.width);
    };

    Bounds.gapUp = function(a, b) {
        return a.y - (b.y + b.height);
    };

    Bounds.gapDown = function(a, b) {
        return b.y - (a.y + a.height);
    };

    Bounds.isCloseNeighbor = function(bounds, info, dir) {
        var ref1, ref2, ref3, ref4;
        switch (dir) {
            case 'right':
                return (0 <= (ref1 = this.gapRight(bounds, info.bounds)) && ref1 < bounds.width);
            case 'left':
                return (0 <= (ref2 = this.gapLeft(bounds, info.bounds)) && ref2 < bounds.width);
            case 'down':
                return (0 <= (ref3 = this.gapDown(bounds, info.bounds)) && ref3 < bounds.height);
            case 'up':
                return (0 <= (ref4 = this.gapUp(bounds, info.bounds)) && ref4 < bounds.height);
        }
    };

    Bounds.closeNeighbor = function(infos, kachel, dir) {
        var i, info, kb, len;
        kb = kachel.getBounds();
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.isCloseNeighbor(kb, info, dir)) {
                return info;
            }
        }
    };

    Bounds.snap = function(kacheln, kachel) {
        var b, horz, i, info, infos, len, n, sh, sw, sy, vert;
        b = kachel.getBounds();
        horz = false;
        vert = false;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        if (b.x < 0 || b.x < 72) {
            horz = true;
            b.x = 0;
        } else if (b.x + b.width > sw || b.x + b.width > sw - 72) {
            horz = true;
            b.x = sw - b.width;
        }
        if (b.y < 0 || b.y < 72) {
            vert = true;
            b.y = 0;
        } else if (b.y + b.height > sh || b.y + b.height > sh - 72) {
            vert = true;
            b.y = sh - b.height;
        }
        infos = this.getInfos(kacheln);
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.overlap(b, info.bounds)) {
                b.y = info.bounds.y + info.bounds.height;
            }
        }
        if (!vert) {
            if (n = this.closeNeighbor(infos, kachel, 'up')) {
                b.y = n.bounds.y + n.bounds.height;
            } else if (n = this.closeNeighbor(infos, kachel, 'down')) {
                b.y = n.bounds.y - b.height;
            }
        }
        if (!horz) {
            if (n = this.closeNeighbor(infos, kachel, 'right')) {
                b.x = n.bounds.x - b.width;
            } else if (n = this.closeNeighbor(infos, kachel, 'left')) {
                b.x = n.bounds.x + n.bounds.width;
            }
        }
        kachel.setBounds(b);
        return post.toWin(kachel.id, 'saveBounds');
    };

    Bounds.arrange = function(kacheln) {
        var check, i, index, info, infos, j, k, l, len, len1, pb, pinned, ref1, results;
        klog('no arrange');
        return;
        infos = this.getInfos(kacheln);
        for (index = i = 0, ref1 = infos.length; 0 <= ref1 ? i < ref1 : i > ref1; index = 0 <= ref1 ? ++i : --i) {
            pinned = infos.slice(0, +index + 1 || 9e9);
            check = infos.slice(index + 1);
            pb = pinned.slice(-1)[0].bounds;
            for (j = 0, len = check.length; j < len; j++) {
                k = check[j];
                if (this.overlap(pb, k.bounds)) {
                    k.bounds.y = pb.y + pb.height;
                }
            }
        }
        results = [];
        for (l = 0, len1 = infos.length; l < len1; l++) {
            info = infos[l];
            info.kachel.setBounds(info.bounds);
            results.push(post.toWin(info.kachel.id, 'saveBounds'));
        }
        return results;
    };

    return Bounds;

})();

module.exports = Bounds;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm91bmRzLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUF3QixPQUFBLENBQVEsS0FBUixDQUF4QixFQUFFLGVBQUYsRUFBUSxpQkFBUixFQUFlOztBQUVmLFFBQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFFTDs7O0lBRUYsTUFBQyxDQUFBLEVBQUQsR0FBSyxTQUFBO2VBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIsQ0FBQSxDQUFtQyxDQUFDLFlBQVksQ0FBQztJQUFwRDs7SUFDTCxNQUFDLENBQUEsRUFBRCxHQUFLLFNBQUE7ZUFBRyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFoQixDQUFBLENBQW1DLENBQUMsWUFBWSxDQUFDO0lBQXBEOztJQUNMLE1BQUMsQ0FBQSxFQUFELEdBQUssU0FBQTtlQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsaUJBQWhCLENBQUEsQ0FBbUMsQ0FBQyxRQUFRLENBQUM7SUFBaEQ7O0lBRUwsTUFBQyxDQUFBLFFBQUQsR0FBVyxTQUFDLENBQUQ7QUFFUCxZQUFBO1FBQUEsRUFBQSxHQUFLLElBQUMsQ0FBQSxFQUFELENBQUE7UUFDTCxFQUFBLEdBQUssSUFBQyxDQUFBLEVBQUQsQ0FBQTtRQUNMLEVBQUEsR0FBSyxJQUFDLENBQUEsRUFBRCxDQUFBO1FBRUwsQ0FBQyxDQUFDLENBQUYsR0FBTSxLQUFBLENBQU0sQ0FBTixFQUFTLEVBQUEsR0FBSyxDQUFDLENBQUMsS0FBaEIsRUFBd0IsQ0FBQyxDQUFDLENBQTFCO1FBQ04sQ0FBQyxDQUFDLENBQUYsR0FBTSxLQUFBLENBQU0sQ0FBTixFQUFTLEVBQUEsR0FBSyxDQUFDLENBQUMsTUFBaEIsRUFBd0IsQ0FBQyxDQUFDLENBQTFCO1FBRU4sSUFBRyxDQUFDLENBQUMsQ0FBRixHQUFNLENBQUMsQ0FBQyxLQUFSLEdBQWlCLEVBQUEsR0FBSyxDQUFDLENBQUMs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QSxHQUFJLElBQUMsQ0FBQSxhQUFELENBQWUsS0FBZixFQUFzQixNQUF0QixFQUE4QixNQUE5QixDQUFQO2dCQUNELENBQUMsQ0FBQyxDQUFGLEdBQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFULEdBQWEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUQzQjthQUhUOztRQU1BLE1BQU0sQ0FBQyxTQUFQLENBQWlCLENBQWpCO2VBQ0EsSUFBSSxDQUFDLEtBQUwsQ0FBVyxNQUFNLENBQUMsRUFBbEIsRUFBc0IsWUFBdEI7SUE1Q0c7O0lBOENQLE1BQUMsQ0FBQSxPQUFELEdBQVUsU0FBQyxPQUFEO0FBRU4sWUFBQTtRQUFBLElBQUEsQ0FBSyxZQUFMO0FBQ0E7UUFFQSxLQUFBLEdBQVEsSUFBQyxDQUFBLFFBQUQsQ0FBVSxPQUFWO0FBRVIsYUFBYSxrR0FBYjtZQUNJLE1BQUEsR0FBUyxLQUFNO1lBQ2YsS0FBQSxHQUFTLEtBQU07WUFDZixFQUFBLEdBQUssTUFBTyxVQUFFLENBQUEsQ0FBQSxDQUFDLENBQUM7QUFDaEIsaUJBQUEsdUNBQUE7O2dCQUNJLElBQUcsSUFBQyxDQUFBLE9BQUQsQ0FBUyxFQUFULEVBQWEsQ0FBQyxDQUFDLE1BQWYsQ0FBSDtvQkFDSSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQVQsR0FBYSxFQUFFLENBQUMsQ0FBSCxHQUFPLEVBQUUsQ0FBQyxPQUQzQjs7QUFESjtBQUpKO0FBUUE7YUFBQSx5Q0FBQTs7WUFDSSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVosQ0FBc0IsSUFBSSxDQUFDLE1BQTNCO3lCQUNBLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUF2QixFQUEyQixZQUEzQjtBQUZKOztJQWZNOzs7Ozs7QUFtQmQsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgXG4wMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAgICAgIDAwMFxuMDAwMDAwMCAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAgXG4jIyNcblxueyBwb3N0LCBjbGFtcCwga2xvZyB9ID0gcmVxdWlyZSAna3hrJ1xuXG5lbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xuXG5jbGFzcyBCb3VuZHNcbiAgICBcbiAgICBAc3c6IC0+IGVsZWN0cm9uLnNjcmVlbi5nZXRQcmltYXJ5RGlzcGxheSgpLndvcmtBcmVhU2l6ZS53aWR0aFxuICAgIEBzaDogLT4gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplLmhlaWdodFxuICAgIEBzeTogLT4gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWEueVxuXG4gICAgQG9uU2NyZWVuOiAoYikgLT5cbiAgICAgICAgXG4gICAgICAgIHN3ID0gQHN3KClcbiAgICAgICAgc2ggPSBAc2goKVxuICAgICAgICBzeSA9IEBzeSgpXG4gICAgICAgIFxuICAgICAgICBiLnggPSBjbGFtcCAwLCBzdyAtIGIud2lkdGgsICBiLnhcbiAgICAgICAgYi55ID0gY2xhbXAgMCwgc2ggLSBiLmhlaWdodCwgYi55XG4gICAgICAgIFxuICAgICAgICBpZiBiLnggKyBiLndpZHRoICA+IHN3IC0gYi53aWR0aCAgdGhlbiBiLnggPSBzdy1iLndpZHRoXG4gICAgICAgIGlmIGIueSArIGIuaGVpZ2h0ID4gc2ggLSBiLmhlaWdodCB0aGVuIGIueSA9IHNoLWIuaGVpZ2h0XG4gICAgICAgIGlmIGIueCAgICAgIDwgYi53aWR0aCAgdGhlbiBiLnggPSAwXG4gICAgICAgIGlmIGIueSAtIHN5IDwgYi5oZWlnaHQgdGhlbiBiLnkgPSBzeVxuICAgICAgICBcbiAgICAgICAgYlxuICAgICAgICBcbiAgICBAb3ZlcmxhcDogKGEsYikgLT5cbiAgICAgICAgbm90IChhLnggPiBiLngrYi53aWR0aCAgb3JcbiAgICAgICAgICAgICBiLnggPiBhLngrYS53aWR0aCAgb3JcbiAgICAgICAgICAgICBhLnkgPiBiLnkrYi5oZWlnaHQgb3JcbiAgICAgICAgICAgICBiLnkgPiBhLnkrYS5oZWlnaHQpXG4gICAgICAgICAgICAgXG4gICAgQGJvcmRlckRpc3Q6IChiKSAtPlxuICAgICAgICBkeCA9IGlmIGIueCA8IEBzdygpLzIgdGhlbiBiLnggZWxzZSBAc3coKSAtIChiLnggKyBiLndpZHRoKVxuICAgICAgICBkeSA9IGlmIGIueSA8IEBzaCgpLzIgdGhlbiBiLnkgZWxzZSBAc2goKSAtIChiLnkgKyBiLmhlaWdodClcbiAgICAgICAgTWF0aC5taW4gZHgsIGR5XG4gICAgICAgIFxuICAgIEBnZXRJbmZvczogKGthY2hlbG4pIC0+XG4gICAgICAgIFxuICAgICAgICBpbmRleCA9IDBcbiAgICAgICAgaW5mb3MgPSBrYWNoZWxuLm1hcCAoaykgPT4gXG4gICAgICAgICAgICBrYWNoZWw6IGtcbiAgICAgICAgICAgIGluZGV4OiAgaW5kZXgrK1xuICAgICAgICAgICAgYm91bmRzOiBAb25TY3JlZW4gay5nZXRCb3VuZHMoKVxuICAgICAgICAgICAgXG4gICAgICAgIGluZm9zLnNvcnQgKGEsYikgPT5cbiAgICAgICAgICAgIEBib3JkZXJEaXN0KGEuYm91bmRzKSAtIEBib3JkZXJEaXN0KGIuYm91bmRzKVxuXG4gICAgICAgIGluZm9zXG4gICAgICAgIFxuICAgIEBnYXBSaWdodDogKGEsIGIpIC0+IGIueCAtIChhLnggKyBhLndpZHRoKVxuICAgIEBnYXBMZWZ0OiAgKGEsIGIpIC0+IGEueCAtIChiLnggKyBiLndpZHRoKVxuICAgIEBnYXBVcDogICAgKGEsIGIpIC0+IGEueSAtIChiLnkgKyBiLmhlaWdodClcbiAgICBAZ2FwRG93bjogIChhLCBiKSAtPiBiLnkgLSAoYS55ICsgYS5oZWlnaHQpXG4gICAgICAgIFxuICAgIEBpc0Nsb3NlTmVpZ2hib3I6IChib3VuZHMsIGluZm8sIGRpcikgLT5cbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCBkaXJcbiAgICAgICAgICAgIHdoZW4gJ3JpZ2h0JyB0aGVuIHJldHVybiAwIDw9IEBnYXBSaWdodChib3VuZHMsIGluZm8uYm91bmRzKSA8IGJvdW5kcy53aWR0aFxuICAgICAgICAgICAgd2hlbiAnbGVmdCcgIHRoZW4gcmV0dXJuIDAgPD0gQGdhcExlZnQoIGJvdW5kcywgaW5mby5ib3VuZHMpIDwgYm91bmRzLndpZHRoXG4gICAgICAgICAgICB3aGVuICdkb3duJyAgdGhlbiByZXR1cm4gMCA8PSBAZ2FwRG93biggYm91bmRzLCBpbmZvLmJvdW5kcykgPCBib3VuZHMuaGVpZ2h0XG4gICAgICAgICAgICB3aGVuICd1cCcgICAgdGhlbiByZXR1cm4gMCA8PSBAZ2FwVXAoICAgYm91bmRzLCBpbmZvLmJvdW5kcykgPCBib3VuZHMuaGVpZ2h0XG4gICAgICAgIFxuICAgIEBjbG9zZU5laWdoYm9yOiAoaW5mb3MsIGthY2hlbCwgZGlyKSAtPlxuICAgICAgICBrYiA9IGthY2hlbC5nZXRCb3VuZHMoKVxuICAgICAgICBmb3IgaW5mbyBpbiBpbmZvc1xuICAgICAgICAgICAgY29udGludWUgaWYgaW5mby5rYWNoZWwgPT0ga2FjaGVsXG4gICAgICAgICAgICByZXR1cm4gaW5mbyBpZiBAaXNDbG9zZU5laWdoYm9yIGtiLCBpbmZvLCBkaXJcbiAgICAgICAgXG4gICAgQHNuYXA6IChrYWNoZWxuLCBrYWNoZWwpIC0+XG4gICAgICAgIFxuICAgICAgICBiID0ga2FjaGVsLmdldEJvdW5kcygpXG4gICAgICAgIFxuICAgICAgICBob3J6ID0gZmFsc2VcbiAgICAgICAgdmVydCA9IGZhbHNlXG4gICAgICAgIFxuICAgICAgICBzdyA9IEBzdygpXG4gICAgICAgIHNoID0gQHNoKClcbiAgICAgICAgc3kgPSBAc3koKVxuICAgICAgICBcbiAgICAgICAgaWYgYi54IDwgMCBvciBiLnggPCA3MlxuICAgICAgICAgICAgaG9yeiA9IHRydWVcbiAgICAgICAgICAgIGIueCA9IDBcbiAgICAgICAgZWxzZSBpZiBiLnggKyBiLndpZHRoID4gc3cgb3IgYi54ICsgYi53aWR0aCA+IHN3IC0gNzJcbiAgICAgICAgICAgIGhvcnogPSB0cnVlXG4gICAgICAgICAgICBiLnggPSBzdyAtIGIud2lkdGhcblxuICAgICAgICBpZiBiLnkgPCAwIG9yIGIueSA8IDcyXG4gICAgICAgICAgICB2ZXJ0ID0gdHJ1ZVxuICAgICAgICAgICAgYi55ID0gMFxuICAgICAgICBlbHNlIGlmIGIueSArIGIuaGVpZ2h0ID4gc2ggb3IgYi55ICsgYi5oZWlnaHQgPiBzaCAtIDcyXG4gICAgICAgICAgICB2ZXJ0ID0gdHJ1ZVxuICAgICAgICAgICAgYi55ID0gc2ggLSBiLmhlaWdodFxuICAgICAgICAgICAgXG4gICAgICAgIGluZm9zID0gQGdldEluZm9zIGthY2hlbG5cbiAgICAgICAgZm9yIGluZm8gaW4gaW5mb3NcbiAgICAgICAgICAgIGNvbnRpbnVlIGlmIGluZm8ua2FjaGVsID09IGthY2hlbFxuICAgICAgICAgICAgaWYgQG92ZXJsYXAgYiwgaW5mby5ib3VuZHNcbiAgICAgICAgICAgICAgICBiLnkgPSBpbmZvLmJvdW5kcy55ICsgaW5mby5ib3VuZHMuaGVpZ2h0XG4gICAgICAgIFxuICAgICAgICBpZiBub3QgdmVydFxuICAgICAgICAgICAgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICd1cCdcbiAgICAgICAgICAgICAgICBiLnkgPSBuLmJvdW5kcy55ICsgbi5ib3VuZHMuaGVpZ2h0XG4gICAgICAgICAgICBlbHNlIGlmIG4gPSBAY2xvc2VOZWlnaGJvciBpbmZvcywga2FjaGVsLCAnZG93bidcbiAgICAgICAgICAgICAgICBiLnkgPSBuLmJvdW5kcy55IC0gYi5oZWlnaHRcblxuICAgICAgICBpZiBub3QgaG9yelxuICAgICAgICAgICAgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICdyaWdodCdcbiAgICAgICAgICAgICAgICBiLnggPSBuLmJvdW5kcy54IC0gYi53aWR0aFxuICAgICAgICAgICAgZWxzZSBpZiBuID0gQGNsb3NlTmVpZ2hib3IgaW5mb3MsIGthY2hlbCwgJ2xlZnQnXG4gICAgICAgICAgICAgICAgYi54ID0gbi5ib3VuZHMueCArIG4uYm91bmRzLndpZHRoXG4gICAgICAgICAgICBcbiAgICAgICAga2FjaGVsLnNldEJvdW5kcyBiXG4gICAgICAgIHBvc3QudG9XaW4ga2FjaGVsLmlkLCAnc2F2ZUJvdW5kcydcbiAgICAgICAgXG4gICAgQGFycmFuZ2U6IChrYWNoZWxuKSAtPlxuICAgICAgICBcbiAgICAgICAga2xvZyAnbm8gYXJyYW5nZSdcbiAgICAgICAgcmV0dXJuXG4gICAgICAgIFxuICAgICAgICBpbmZvcyA9IEBnZXRJbmZvcyBrYWNoZWxuIFxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgIGZvciBpbmRleCBpbiBbMC4uLmluZm9zLmxlbmd0aF1cbiAgICAgICAgICAgIHBpbm5lZCA9IGluZm9zWzAuLmluZGV4XVxuICAgICAgICAgICAgY2hlY2sgID0gaW5mb3NbaW5kZXgrMS4uXVxuICAgICAgICAgICAgcGIgPSBwaW5uZWRbLTFdLmJvdW5kc1xuICAgICAgICAgICAgZm9yIGsgaW4gY2hlY2tcbiAgICAgICAgICAgICAgICBpZiBAb3ZlcmxhcCBwYiwgay5ib3VuZHNcbiAgICAgICAgICAgICAgICAgICAgay5ib3VuZHMueSA9IHBiLnkgKyBwYi5oZWlnaHRcbiAgICAgICAgICAgIFxuICAgICAgICBmb3IgaW5mbyBpbiBpbmZvc1xuICAgICAgICAgICAgaW5mby5rYWNoZWwuc2V0Qm91bmRzIGluZm8uYm91bmRzXG4gICAgICAgICAgICBwb3N0LnRvV2luIGluZm8ua2FjaGVsLmlkLCAnc2F2ZUJvdW5kcydcbiAgICAgICAgXG5tb2R1bGUuZXhwb3J0cyA9IEJvdW5kc1xuIl19
//# sourceURL=../coffee/bounds.coffee