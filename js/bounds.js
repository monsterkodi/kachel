// koffee 1.3.0

/*
0000000     0000000   000   000  000   000  0000000     0000000
000   000  000   000  000   000  0000  000  000   000  000     
0000000    000   000  000   000  000 0 000  000   000  0000000 
000   000  000   000  000   000  000  0000  000   000       000
0000000     0000000    0000000   000   000  0000000    0000000
 */
var Bounds, clamp, electron, klog, post, ref;

ref = require('kxk'), post = ref.post, clamp = ref.clamp, klog = ref.klog;

electron = require('electron');

Bounds = (function() {
    function Bounds() {}

    Bounds.sw = function() {
        return electron.screen.getPrimaryDisplay().workAreaSize.width;
    };

    Bounds.sh = function() {
        return electron.screen.getPrimaryDisplay().workAreaSize.height;
    };

    Bounds.sy = function() {
        return electron.screen.getPrimaryDisplay().workArea.y;
    };

    Bounds.onScreen = function(b) {
        var sh, sw, sy;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        b.x = clamp(0, sw - b.width, b.x);
        b.y = clamp(0, sh - b.height, b.y);
        if (b.x + b.width > sw - b.width) {
            b.x = sw - b.width;
        }
        if (b.y + b.height > sh - b.height) {
            b.y = sh - b.height;
        }
        if (b.x < b.width) {
            b.x = 0;
        }
        if (b.y - sy < b.height) {
            b.y = sy;
        }
        return b;
    };

    Bounds.overlap = function(a, b) {
        return !(a.x > b.x + b.width || b.x > a.x + a.width || a.y > b.y + b.height || b.y > a.y + a.height);
    };

    Bounds.borderDist = function(b) {
        var dx, dy;
        dx = b.x < this.sw() / 2 ? b.x : this.sw() - (b.x + b.width);
        dy = b.y < this.sh() / 2 ? b.y : this.sh() - (b.y + b.height);
        return Math.min(dx, dy);
    };

    Bounds.getInfos = function(kacheln) {
        var index, infos;
        index = 0;
        infos = kacheln.map((function(_this) {
            return function(k) {
                return {
                    kachel: k,
                    index: index++,
                    bounds: _this.onScreen(k.getBounds())
                };
            };
        })(this));
        infos.sort((function(_this) {
            return function(a, b) {
                return _this.borderDist(a.bounds) - _this.borderDist(b.bounds);
            };
        })(this));
        return infos;
    };

    Bounds.gapRight = function(a, b) {
        return b.x - (a.x + a.width);
    };

    Bounds.gapLeft = function(a, b) {
        return a.x - (b.x + b.width);
    };

    Bounds.gapUp = function(a, b) {
        return a.y - (b.y + b.height);
    };

    Bounds.gapDown = function(a, b) {
        return b.y - (a.y + a.height);
    };

    Bounds.isCloseNeighbor = function(bounds, info, dir) {
        var ref1, ref2, ref3, ref4;
        switch (dir) {
            case 'right':
                return (0 <= (ref1 = this.gapRight(bounds, info.bounds)) && ref1 < bounds.width);
            case 'left':
                return (0 <= (ref2 = this.gapLeft(bounds, info.bounds)) && ref2 < bounds.width);
            case 'down':
                return (0 <= (ref3 = this.gapDown(bounds, info.bounds)) && ref3 < bounds.height);
            case 'up':
                return (0 <= (ref4 = this.gapUp(bounds, info.bounds)) && ref4 < bounds.height);
        }
    };

    Bounds.closeNeighbor = function(infos, kachel, dir) {
        var i, info, kb, len;
        kb = kachel.getBounds();
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.isCloseNeighbor(kb, info, dir)) {
                return info;
            }
        }
    };

    Bounds.snap = function(kacheln, kachel) {
        var b, horz, i, info, infos, len, n, sh, sw, sy, vert;
        b = kachel.getBounds();
        horz = false;
        vert = false;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        if (b.x < 0 || b.x < 72) {
            horz = true;
            b.x = 0;
        } else if (b.x + b.width > sw || b.x + b.width > sw - 72) {
            horz = true;
            b.x = sw - b.width;
        }
        if (b.y < 0 || b.y < 72) {
            vert = true;
            b.y = 0;
        } else if (b.y + b.height > sh || b.y + b.height > sh - 72) {
            vert = true;
            b.y = sh - b.height;
        }
        infos = this.getInfos(kacheln);
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.overlap(b, info.bounds)) {
                b.y = info.bounds.y + info.bounds.height;
            }
        }
        if (!vert) {
            if (n = this.closeNeighbor(infos, kachel, 'up')) {
                b.y = n.bounds.y + n.bounds.height;
            } else if (n = this.closeNeighbor(infos, kachel, 'down')) {
                b.y = n.bounds.y - b.height;
            }
        }
        if (!horz) {
            if (n = this.closeNeighbor(infos, kachel, 'right')) {
                b.x = n.bounds.x - b.width;
            } else if (n = this.closeNeighbor(infos, kachel, 'left')) {
                b.x = n.bounds.x + n.bounds.width;
            }
        }
        kachel.setBounds(b);
        return post.toWin(kachel.id, 'saveBounds');
    };

    return Bounds;

})();

module.exports = Bounds;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm91bmRzLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUF3QixPQUFBLENBQVEsS0FBUixDQUF4QixFQUFFLGVBQUYsRUFBUSxpQkFBUixFQUFlOztBQUVmLFFBQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFFTDs7O0lBRUYsTUFBQyxDQUFBLEVBQUQsR0FBSyxTQUFBO2VBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIsQ0FBQSxDQUFtQyxDQUFDLFlBQVksQ0FBQztJQUFwRDs7SUFDTCxNQUFDLENBQUEsRUFBRCxHQUFLLFNBQUE7ZUFBRyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFoQixDQUFBLENBQW1DLENBQUMsWUFBWSxDQUFDO0lBQXBEOztJQUNMLE1BQUMsQ0FBQSxFQUFELEdBQUssU0FBQTtlQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsaUJBQWhCLENBQUEsQ0FBbUMsQ0FBQyxRQUFRLENBQUM7SUFBaEQ7O0lBRUwsTUFBQyxDQUFBLFFBQUQsR0FBVyxTQUFDLENBQUQ7QUFFUCxZQUFBO1FBQUEsRUFBQSxHQUFLLElBQUMsQ0FBQSxFQUFELENBQUE7UUFDTCxFQUFBLEdBQUssSUFBQyxDQUFBLEVBQUQsQ0FBQTtRQUNMLEVBQUEsR0FBSyxJQUFDLENBQUEsRUFBRCxDQUFBO1FBRUwsQ0FBQyxDQUFDLENBQUYsR0FBTSxLQUFBLENBQU0sQ0FBTixFQUFTLEVBQUEsR0FBSyxDQUFDLENBQUMsS0FBaEIsRUFBd0IsQ0FBQyxDQUFDLENBQTFCO1FBQ04sQ0FBQyxDQUFDLENBQUYsR0FBTSxLQUFBLENBQU0sQ0FBTixFQUFTLEVBQUEsR0FBSyxDQUFDLENBQUMsTUFBaEIsRUFBd0IsQ0FBQyxDQUFDLENBQTFCO1FBRU4sSUFBRyxDQUFDLENBQUMsQ0FBRixHQUFNLENBQUMsQ0FBQyxLQUFSLEdBQWlCLEVBQUEsR0FBSyxDQUFDLENBQUMs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QSxHQUFJLElBQUMsQ0FBQSxhQUFELENBQWUsS0FBZixFQUFzQixNQUF0QixFQUE4QixNQUE5QixDQUFQO2dCQUNELENBQUMsQ0FBQyxDQUFGLEdBQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFULEdBQWEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUQzQjthQUhUOztRQU1BLE1BQU0sQ0FBQyxTQUFQLENBQWlCLENBQWpCO2VBQ0EsSUFBSSxDQUFDLEtBQUwsQ0FBVyxNQUFNLENBQUMsRUFBbEIsRUFBc0IsWUFBdEI7SUE1Q0c7Ozs7OztBQThDWCxNQUFNLENBQUMsT0FBUCxHQUFpQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICBcbjAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwIFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgICAgICAgMDAwXG4wMDAwMDAwICAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwMDAwMCBcbiMjI1xuXG57IHBvc3QsIGNsYW1wLCBrbG9nIH0gPSByZXF1aXJlICdreGsnXG5cbmVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5cbmNsYXNzIEJvdW5kc1xuICAgIFxuICAgIEBzdzogLT4gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplLndpZHRoXG4gICAgQHNoOiAtPiBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUuaGVpZ2h0XG4gICAgQHN5OiAtPiBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYS55XG5cbiAgICBAb25TY3JlZW46IChiKSAtPlxuICAgICAgICBcbiAgICAgICAgc3cgPSBAc3coKVxuICAgICAgICBzaCA9IEBzaCgpXG4gICAgICAgIHN5ID0gQHN5KClcbiAgICAgICAgXG4gICAgICAgIGIueCA9IGNsYW1wIDAsIHN3IC0gYi53aWR0aCwgIGIueFxuICAgICAgICBiLnkgPSBjbGFtcCAwLCBzaCAtIGIuaGVpZ2h0LCBiLnlcbiAgICAgICAgXG4gICAgICAgIGlmIGIueCArIGIud2lkdGggID4gc3cgLSBiLndpZHRoICB0aGVuIGIueCA9IHN3LWIud2lkdGhcbiAgICAgICAgaWYgYi55ICsgYi5oZWlnaHQgPiBzaCAtIGIuaGVpZ2h0IHRoZW4gYi55ID0gc2gtYi5oZWlnaHRcbiAgICAgICAgaWYgYi54ICAgICAgPCBiLndpZHRoICB0aGVuIGIueCA9IDBcbiAgICAgICAgaWYgYi55IC0gc3kgPCBiLmhlaWdodCB0aGVuIGIueSA9IHN5XG4gICAgICAgIFxuICAgICAgICBiXG4gICAgICAgIFxuICAgIEBvdmVybGFwOiAoYSxiKSAtPlxuICAgICAgICBub3QgKGEueCA+IGIueCtiLndpZHRoICBvclxuICAgICAgICAgICAgIGIueCA+IGEueCthLndpZHRoICBvclxuICAgICAgICAgICAgIGEueSA+IGIueStiLmhlaWdodCBvclxuICAgICAgICAgICAgIGIueSA+IGEueSthLmhlaWdodClcbiAgICAgICAgICAgICBcbiAgICBAYm9yZGVyRGlzdDogKGIpIC0+XG4gICAgICAgIGR4ID0gaWYgYi54IDwgQHN3KCkvMiB0aGVuIGIueCBlbHNlIEBzdygpIC0gKGIueCArIGIud2lkdGgpXG4gICAgICAgIGR5ID0gaWYgYi55IDwgQHNoKCkvMiB0aGVuIGIueSBlbHNlIEBzaCgpIC0gKGIueSArIGIuaGVpZ2h0KVxuICAgICAgICBNYXRoLm1pbiBkeCwgZHlcbiAgICAgICAgXG4gICAgQGdldEluZm9zOiAoa2FjaGVsbikgLT5cbiAgICAgICAgXG4gICAgICAgIGluZGV4ID0gMFxuICAgICAgICBpbmZvcyA9IGthY2hlbG4ubWFwIChrKSA9PiBcbiAgICAgICAgICAgIGthY2hlbDoga1xuICAgICAgICAgICAgaW5kZXg6ICBpbmRleCsrXG4gICAgICAgICAgICBib3VuZHM6IEBvblNjcmVlbiBrLmdldEJvdW5kcygpXG4gICAgICAgICAgICBcbiAgICAgICAgaW5mb3Muc29ydCAoYSxiKSA9PlxuICAgICAgICAgICAgQGJvcmRlckRpc3QoYS5ib3VuZHMpIC0gQGJvcmRlckRpc3QoYi5ib3VuZHMpXG5cbiAgICAgICAgaW5mb3NcbiAgICAgICAgXG4gICAgQGdhcFJpZ2h0OiAoYSwgYikgLT4gYi54IC0gKGEueCArIGEud2lkdGgpXG4gICAgQGdhcExlZnQ6ICAoYSwgYikgLT4gYS54IC0gKGIueCArIGIud2lkdGgpXG4gICAgQGdhcFVwOiAgICAoYSwgYikgLT4gYS55IC0gKGIueSArIGIuaGVpZ2h0KVxuICAgIEBnYXBEb3duOiAgKGEsIGIpIC0+IGIueSAtIChhLnkgKyBhLmhlaWdodClcbiAgICAgICAgXG4gICAgQGlzQ2xvc2VOZWlnaGJvcjogKGJvdW5kcywgaW5mbywgZGlyKSAtPlxuICAgICAgICBcbiAgICAgICAgc3dpdGNoIGRpclxuICAgICAgICAgICAgd2hlbiAncmlnaHQnIHRoZW4gcmV0dXJuIDAgPD0gQGdhcFJpZ2h0KGJvdW5kcywgaW5mby5ib3VuZHMpIDwgYm91bmRzLndpZHRoXG4gICAgICAgICAgICB3aGVuICdsZWZ0JyAgdGhlbiByZXR1cm4gMCA8PSBAZ2FwTGVmdCggYm91bmRzLCBpbmZvLmJvdW5kcykgPCBib3VuZHMud2lkdGhcbiAgICAgICAgICAgIHdoZW4gJ2Rvd24nICB0aGVuIHJldHVybiAwIDw9IEBnYXBEb3duKCBib3VuZHMsIGluZm8uYm91bmRzKSA8IGJvdW5kcy5oZWlnaHRcbiAgICAgICAgICAgIHdoZW4gJ3VwJyAgICB0aGVuIHJldHVybiAwIDw9IEBnYXBVcCggICBib3VuZHMsIGluZm8uYm91bmRzKSA8IGJvdW5kcy5oZWlnaHRcbiAgICAgICAgXG4gICAgQGNsb3NlTmVpZ2hib3I6IChpbmZvcywga2FjaGVsLCBkaXIpIC0+XG4gICAgICAgIGtiID0ga2FjaGVsLmdldEJvdW5kcygpXG4gICAgICAgIGZvciBpbmZvIGluIGluZm9zXG4gICAgICAgICAgICBjb250aW51ZSBpZiBpbmZvLmthY2hlbCA9PSBrYWNoZWxcbiAgICAgICAgICAgIHJldHVybiBpbmZvIGlmIEBpc0Nsb3NlTmVpZ2hib3Iga2IsIGluZm8sIGRpclxuICAgICAgICBcbiAgICBAc25hcDogKGthY2hlbG4sIGthY2hlbCkgLT5cbiAgICAgICAgXG4gICAgICAgIGIgPSBrYWNoZWwuZ2V0Qm91bmRzKClcbiAgICAgICAgXG4gICAgICAgIGhvcnogPSBmYWxzZVxuICAgICAgICB2ZXJ0ID0gZmFsc2VcbiAgICAgICAgXG4gICAgICAgIHN3ID0gQHN3KClcbiAgICAgICAgc2ggPSBAc2goKVxuICAgICAgICBzeSA9IEBzeSgpXG4gICAgICAgIFxuICAgICAgICBpZiBiLnggPCAwIG9yIGIueCA8IDcyXG4gICAgICAgICAgICBob3J6ID0gdHJ1ZVxuICAgICAgICAgICAgYi54ID0gMFxuICAgICAgICBlbHNlIGlmIGIueCArIGIud2lkdGggPiBzdyBvciBiLnggKyBiLndpZHRoID4gc3cgLSA3MlxuICAgICAgICAgICAgaG9yeiA9IHRydWVcbiAgICAgICAgICAgIGIueCA9IHN3IC0gYi53aWR0aFxuXG4gICAgICAgIGlmIGIueSA8IDAgb3IgYi55IDwgNzJcbiAgICAgICAgICAgIHZlcnQgPSB0cnVlXG4gICAgICAgICAgICBiLnkgPSAwXG4gICAgICAgIGVsc2UgaWYgYi55ICsgYi5oZWlnaHQgPiBzaCBvciBiLnkgKyBiLmhlaWdodCA+IHNoIC0gNzJcbiAgICAgICAgICAgIHZlcnQgPSB0cnVlXG4gICAgICAgICAgICBiLnkgPSBzaCAtIGIuaGVpZ2h0XG4gICAgICAgICAgICBcbiAgICAgICAgaW5mb3MgPSBAZ2V0SW5mb3Mga2FjaGVsblxuICAgICAgICBmb3IgaW5mbyBpbiBpbmZvc1xuICAgICAgICAgICAgY29udGludWUgaWYgaW5mby5rYWNoZWwgPT0ga2FjaGVsXG4gICAgICAgICAgICBpZiBAb3ZlcmxhcCBiLCBpbmZvLmJvdW5kc1xuICAgICAgICAgICAgICAgIGIueSA9IGluZm8uYm91bmRzLnkgKyBpbmZvLmJvdW5kcy5oZWlnaHRcbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCB2ZXJ0XG4gICAgICAgICAgICBpZiBuID0gQGNsb3NlTmVpZ2hib3IgaW5mb3MsIGthY2hlbCwgJ3VwJ1xuICAgICAgICAgICAgICAgIGIueSA9IG4uYm91bmRzLnkgKyBuLmJvdW5kcy5oZWlnaHRcbiAgICAgICAgICAgIGVsc2UgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICdkb3duJ1xuICAgICAgICAgICAgICAgIGIueSA9IG4uYm91bmRzLnkgLSBiLmhlaWdodFxuXG4gICAgICAgIGlmIG5vdCBob3J6XG4gICAgICAgICAgICBpZiBuID0gQGNsb3NlTmVpZ2hib3IgaW5mb3MsIGthY2hlbCwgJ3JpZ2h0J1xuICAgICAgICAgICAgICAgIGIueCA9IG4uYm91bmRzLnggLSBiLndpZHRoXG4gICAgICAgICAgICBlbHNlIGlmIG4gPSBAY2xvc2VOZWlnaGJvciBpbmZvcywga2FjaGVsLCAnbGVmdCdcbiAgICAgICAgICAgICAgICBiLnggPSBuLmJvdW5kcy54ICsgbi5ib3VuZHMud2lkdGhcbiAgICAgICAgICAgIFxuICAgICAgICBrYWNoZWwuc2V0Qm91bmRzIGJcbiAgICAgICAgcG9zdC50b1dpbiBrYWNoZWwuaWQsICdzYXZlQm91bmRzJ1xuICAgICAgICAgICAgICAgIFxubW9kdWxlLmV4cG9ydHMgPSBCb3VuZHNcbiJdfQ==
//# sourceURL=../coffee/bounds.coffee