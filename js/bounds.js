// koffee 1.3.0

/*
0000000     0000000   000   000  000   000  0000000     0000000
000   000  000   000  000   000  0000  000  000   000  000     
0000000    000   000  000   000  000 0 000  000   000  0000000 
000   000  000   000  000   000  000  0000  000   000       000
0000000     0000000    0000000   000   000  0000000    0000000
 */
var Bounds, clamp, electron, klog, os, post, ref, wxw;

ref = require('kxk'), post = ref.post, clamp = ref.clamp, klog = ref.klog, os = ref.os;

if (os.platform() === 'win32') {
    wxw = require('wxw');
}

electron = require('electron');

Bounds = (function() {
    function Bounds() {}

    Bounds.screenWidth = 0;

    Bounds.screenHeight = 0;

    Bounds.screenTop = 0;

    Bounds.setBounds = function(kachel, b) {
        kachel.setBounds(b);
        return post.toWin(kachel.id, 'saveBounds');
    };

    Bounds.updateScreenSize = function() {
        if (os.platform() === 'win32') {
            this.screenWidth = wxw('screen', 'user').width;
            this.screenHeight = wxw('screen', 'user').height;
            return this.screenTop = 0;
        } else {
            this.screenWidth = electron.screen.getPrimaryDisplay().workAreaSize.width;
            this.screenHeight = electron.screen.getPrimaryDisplay().workAreaSize.height;
            return this.screenTop = electron.screen.getPrimaryDisplay().workArea.y;
        }
    };

    Bounds.sw = function() {
        return this.screenWidth;
    };

    Bounds.sh = function() {
        return this.screenHeight;
    };

    Bounds.sy = function() {
        return this.screenTop;
    };

    Bounds.getInfos = function(kacheln) {
        var index, infos, maxX, maxY, minX, minY;
        index = 0;
        minX = minY = 9999;
        maxX = maxY = 0;
        infos = kacheln.map((function(_this) {
            return function(k) {
                var b;
                b = _this.validBounds(k);
                minX = Math.min(minX, b.x);
                minY = Math.min(minY, b.y);
                maxX = Math.max(maxX, b.x + b.width);
                maxY = Math.max(maxY, b.y + b.height);
                return {
                    kachel: k,
                    index: index++,
                    bounds: b
                };
            };
        })(this));
        infos.sort((function(_this) {
            return function(a, b) {
                return _this.borderDist(a.bounds) - _this.borderDist(b.bounds);
            };
        })(this));
        infos.kachelBounds = {
            x: minX,
            y: minY,
            width: maxX - minX,
            height: maxY - minY
        };
        return infos;
    };

    Bounds.validBounds = function(kachel) {
        return this.onScreen(kachel.getBounds());
    };

    Bounds.onScreen = function(b) {
        var sh, sw, sy;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        b.x = clamp(0, sw - b.width, b.x);
        b.y = clamp(0, sh - b.height, b.y);
        if (b.x + b.width > sw - b.width) {
            b.x = sw - b.width;
        }
        if (b.y + b.height > sy + sh - b.height) {
            b.y = sy + sh - b.height;
        }
        if (b.x < b.width) {
            b.x = 0;
        }
        if (b.y - sy < b.height) {
            b.y = sy;
        }
        return b;
    };

    Bounds.isOnScreen = function(b) {
        var sh, sw, sy;
        if (b.y < 0 || b.x < 0) {
            return false;
        }
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        if (b.x + b.width > sw) {
            return false;
        }
        if (b.y + b.height > sy + sh) {
            return false;
        }
        return true;
    };

    Bounds.overlap = function(a, b) {
        if (!a || !b) {
            return false;
        }
        return !(a.x > b.x + b.width - 1 || b.x > a.x + a.width - 1 || a.y > b.y + b.height - 1 || b.y > a.y + a.height - 1);
    };

    Bounds.overlapInfo = function(infos, b) {
        var i, info, len;
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (this.overlap(info.bounds, b)) {
                return info;
            }
        }
    };

    Bounds.borderDist = function(b) {
        var dx, dy;
        dx = b.x < this.sw() / 2 ? b.x : this.sw() - (b.x + b.width);
        dy = b.y < this.sh() / 2 ? b.y : this.sh() - (b.y + b.height);
        return Math.min(dx, dy);
    };

    Bounds.contains = function(b, p) {
        return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;
    };

    Bounds.kachelAtPos = function(infos, p) {
        var i, k, len;
        for (i = 0, len = infos.length; i < len; i++) {
            k = infos[i];
            if (this.contains(k.bounds, p)) {
                return k;
            }
        }
    };

    Bounds.gapRight = function(a, b) {
        return b.x - (a.x + a.width);
    };

    Bounds.gapLeft = function(a, b) {
        return a.x - (b.x + b.width);
    };

    Bounds.gapUp = function(a, b) {
        return a.y - (b.y + b.height);
    };

    Bounds.gapDown = function(a, b) {
        return b.y - (a.y + a.height);
    };

    Bounds.isCloseNeighbor = function(bounds, info, dir) {
        var ref1, ref2, ref3, ref4;
        switch (dir) {
            case 'right':
                return (0 <= (ref1 = this.gapRight(bounds, info.bounds)) && ref1 < bounds.width);
            case 'left':
                return (0 <= (ref2 = this.gapLeft(bounds, info.bounds)) && ref2 < bounds.width);
            case 'down':
                return (0 <= (ref3 = this.gapDown(bounds, info.bounds)) && ref3 < bounds.height);
            case 'up':
                return (0 <= (ref4 = this.gapUp(bounds, info.bounds)) && ref4 < bounds.height);
        }
    };

    Bounds.closeNeighbor = function(infos, kachel, dir) {
        var i, info, kb, len;
        kb = kachel.getBounds();
        infos.sort(function(a, b) {
            switch (dir) {
                case 'left':
                case 'right':
                    return Math.abs(a.bounds.y - kb.y) - Math.abs(b.bounds.y - kb.y);
                case 'up':
                case 'down':
                    return Math.abs(a.bounds.x - kb.x) - Math.abs(b.bounds.x - kb.x);
            }
        });
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.isCloseNeighbor(kb, info, dir)) {
                return info;
            }
        }
    };

    Bounds.nextNeighbor = function(infos, kachel, dir) {
        var kb, neighbor;
        if (neighbor = this.closeNeighbor(infos, kachel, dir)) {
            kb = kachel.getBounds();
            switch (dir) {
                case 'left':
                case 'right':
                    if (neighbor.bounds.y === kb.y) {
                        return neighbor;
                    }
                    break;
                case 'up':
                case 'down':
                    if (neighbor.bounds.x === kb.x) {
                        return neighbor;
                    }
            }
        }
    };

    Bounds.snap = function(infos, kachel, b) {
        var horz, i, info, len, n, sh, sw, sy, vert;
        if (b != null) {
            b;
        } else {
            b = kachel.getBounds();
        }
        horz = false;
        vert = false;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        if (b.x < 0 || b.x < 72) {
            horz = true;
            b.x = 0;
        } else if (b.x + b.width > sw || b.x + b.width > sw - 72) {
            horz = true;
            b.x = sw - b.width;
        }
        if (b.y < 0 || b.y < 72) {
            vert = true;
            b.y = 0;
        } else if (b.y + b.height > sh + sy || b.y + b.height > sh + sy - 72) {
            vert = true;
            b.y = sh + sy - b.height;
        }
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.overlap(b, info.bounds)) {
                b.y = info.bounds.y + info.bounds.height;
            }
        }
        if (!vert) {
            if (n = this.closeNeighbor(infos, kachel, 'up')) {
                b.y = n.bounds.y + n.bounds.height;
            } else if (n = this.closeNeighbor(infos, kachel, 'down')) {
                b.y = n.bounds.y - b.height;
            }
        }
        if (!horz) {
            if (n = this.closeNeighbor(infos, kachel, 'right')) {
                b.x = n.bounds.x - b.width;
            } else if (n = this.closeNeighbor(infos, kachel, 'left')) {
                b.x = n.bounds.x + n.bounds.width;
            }
        }
        return b;
    };

    return Bounds;

})();

module.exports = Bounds;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm91bmRzLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUE0QixPQUFBLENBQVEsS0FBUixDQUE1QixFQUFFLGVBQUYsRUFBUSxpQkFBUixFQUFlLGVBQWYsRUFBcUI7O0FBRXJCLElBQUcsRUFBRSxDQUFDLFFBQUgsQ0FBQSxDQUFBLEtBQWUsT0FBbEI7SUFBK0IsR0FBQSxHQUFNLE9BQUEsQ0FBUSxLQUFSLEVBQXJDOzs7QUFDQSxRQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBRUw7OztJQUVGLE1BQUMsQ0FBQSxXQUFELEdBQWU7O0lBQ2YsTUFBQyxDQUFBLFlBQUQsR0FBZTs7SUFDZixNQUFDLENBQUEsU0FBRCxHQUFlOztJQUVmLE1BQUMsQ0FBQSxTQUFELEdBQVksU0FBQyxNQUFELEVBQVMsQ0FBVDtRQUVSLE1BQU0sQ0FBQyxTQUFQLENBQWlCLENBQWpCO2VBQ0EsSUFBSSxDQUFDLEtBQUwsQ0FBVyxNQUFNLENBQUMsRUFBbEIsRUFBc0IsWUFBdEI7SUFIUTs7SUFLWixNQUFDLENBQUEsZ0JBQUQsR0FBbUIsU0FBQTtRQUVmLElBQUcsRUFBRSxDQUFDLFFBQUgsQ0FBQSxDQUFBLEtBQWlCLE9BQXBCO1lBQ0ksSUFBQyxDQUFBLFdBQUQsR0FBZ0IsR0FBQSxDQUFJLFFBQUosRUFBYSxNQUFiLENBQW9CLENBQUM7WUFDckMsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsR0FBQSxDQUFJLFFBQUosRUFBYSxNQUFiLENBQW9CLENBQUM7bUJBQ3JDLElBQUMsQ0FBQSxTQUFELEdBQWdCLEVBSHBCO1NBQUEsTUFBQTtZQUtJLElBQUMsQ0FBQSxXQUFELEdBQWdCLFFBQVEsQ0FBQyxNQUFNLENBQUMsaUJBQWhCLENBQUEsQ0FBbUMsQ0FBQyxZQUFZLENBQUM7WUFDakUsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIs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QUR0Qzs7QUFGSjtRQUtBLElBQUcsQ0FBSSxJQUFQO1lBQ0ksSUFBRyxDQUFBLEdBQUksSUFBQyxDQUFBLGFBQUQsQ0FBZSxLQUFmLEVBQXNCLE1BQXRCLEVBQThCLElBQTlCLENBQVA7Z0JBQ0ksQ0FBQyxDQUFDLENBQUYsR0FBTSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQVQsR0FBYSxDQUFDLENBQUMsTUFBTSxDQUFDLE9BRGhDO2FBQUEsTUFFSyxJQUFHLENBQUEsR0FBSSxJQUFDLENBQUEsYUFBRCxDQUFlLEtBQWYsRUFBc0IsTUFBdEIsRUFBOEIsTUFBOUIsQ0FBUDtnQkFDRCxDQUFDLENBQUMsQ0FBRixHQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBVCxHQUFhLENBQUMsQ0FBQyxPQURwQjthQUhUOztRQU1BLElBQUcsQ0FBSSxJQUFQO1lBQ0ksSUFBRyxDQUFBLEdBQUksSUFBQyxDQUFBLGFBQUQsQ0FBZSxLQUFmLEVBQXNCLE1BQXRCLEVBQThCLE9BQTlCLENBQVA7Z0JBQ0ksQ0FBQyxDQUFDLENBQUYsR0FBTSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQVQsR0FBYSxDQUFDLENBQUMsTUFEekI7YUFBQSxNQUVLLElBQUcsQ0FBQSxHQUFJLElBQUMsQ0FBQSxhQUFELENBQWUsS0FBZixFQUFzQixNQUF0QixFQUE4QixNQUE5QixDQUFQO2dCQUNELENBQUMsQ0FBQyxDQUFGLEdBQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFULEdBQWEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUQzQjthQUhUOztlQUtBO0lBekNHOzs7Ozs7QUEyQ1gsTUFBTSxDQUFDLE9BQVAsR0FBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbjAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgXG4wMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAgICAgIDAwMFxuMDAwMDAwMCAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAgXG4jIyNcblxueyBwb3N0LCBjbGFtcCwga2xvZywgb3MgfSA9IHJlcXVpcmUgJ2t4aydcblxuaWYgb3MucGxhdGZvcm0oKT09J3dpbjMyJyB0aGVuIHd4dyA9IHJlcXVpcmUgJ3d4dydcbmVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5cbmNsYXNzIEJvdW5kc1xuXG4gICAgQHNjcmVlbldpZHRoOiAgMFxuICAgIEBzY3JlZW5IZWlnaHQ6IDBcbiAgICBAc2NyZWVuVG9wOiAgICAwXG4gICAgXG4gICAgQHNldEJvdW5kczogKGthY2hlbCwgYikgLT5cbiAgICAgICAgXG4gICAgICAgIGthY2hlbC5zZXRCb3VuZHMgYlxuICAgICAgICBwb3N0LnRvV2luIGthY2hlbC5pZCwgJ3NhdmVCb3VuZHMnXG4gICAgICAgIFxuICAgIEB1cGRhdGVTY3JlZW5TaXplOiAtPlxuICAgICAgICBcbiAgICAgICAgaWYgb3MucGxhdGZvcm0oKSA9PSAnd2luMzInXG4gICAgICAgICAgICBAc2NyZWVuV2lkdGggID0gd3h3KCdzY3JlZW4nICd1c2VyJykud2lkdGhcbiAgICAgICAgICAgIEBzY3JlZW5IZWlnaHQgPSB3eHcoJ3NjcmVlbicgJ3VzZXInKS5oZWlnaHRcbiAgICAgICAgICAgIEBzY3JlZW5Ub3AgICAgPSAwXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBzY3JlZW5XaWR0aCAgPSBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUud2lkdGhcbiAgICAgICAgICAgIEBzY3JlZW5IZWlnaHQgPSBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUuaGVpZ2h0XG4gICAgICAgICAgICBAc2NyZWVuVG9wICAgID0gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWEueVxuICAgIFxuICAgICMgQHN3OiAtPiBpZiBvcy5wbGF0Zm9ybSgpID09ICd3aW4zMicgdGhlbiB3eHcoJ3NjcmVlbicgJ3VzZXInKS53aWR0aCAgZWxzZSBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUud2lkdGhcbiAgICAjIEBzaDogLT4gaWYgb3MucGxhdGZvcm0oKSA9PSAnd2luMzInIHRoZW4gd3h3KCdzY3JlZW4nICd1c2VyJykuaGVpZ2h0IGVsc2UgZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplLmhlaWdodFxuICAgIEBzdzogLT4gQHNjcmVlbldpZHRoXG4gICAgQHNoOiAtPiBAc2NyZWVuSGVpZ2h0XG4gICAgQHN5OiAtPiBAc2NyZWVuVG9wXG5cbiAgICAjIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuICAgICMgMDAwICAwMDAgMCAwMDAgIDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMDAwMDAgICBcbiAgICAjIDAwMCAgMDAwICAwMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAgICAgIDAwMCAgXG4gICAgIyAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAwMDAwICAgMDAwMDAwMCAgIFxuICAgIFxuICAgIEBnZXRJbmZvczogKGthY2hlbG4pIC0+XG4gICAgICAgIFxuICAgICAgICBpbmRleCA9IDBcbiAgICAgICAgbWluWCA9IG1pblkgPSA5OTk5XG4gICAgICAgIG1heFggPSBtYXhZID0gMFxuICAgICAgICBcbiAgICAgICAgaW5mb3MgPSBrYWNoZWxuLm1hcCAoaykgPT4gXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGIgPSBAdmFsaWRCb3VuZHMga1xuICAgICAgICAgICAgbWluWCA9IE1hdGgubWluIG1pblgsIGIueFxuICAgICAgICAgICAgbWluWSA9IE1hdGgubWluIG1pblksIGIueVxuICAgICAgICAgICAgbWF4WCA9IE1hdGgubWF4IG1heFgsIGIueCtiLndpZHRoXG4gICAgICAgICAgICBtYXhZID0gTWF0aC5tYXggbWF4WSwgYi55K2IuaGVpZ2h0XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGthY2hlbDoga1xuICAgICAgICAgICAgaW5kZXg6ICBpbmRleCsrXG4gICAgICAgICAgICBib3VuZHM6IGJcbiAgICAgICAgICAgIFxuICAgICAgICBpbmZvcy5zb3J0IChhLGIpID0+XG4gICAgICAgICAgICBAYm9yZGVyRGlzdChhLmJvdW5kcykgLSBAYm9yZGVyRGlzdChiLmJvdW5kcylcblxuICAgICAgICBpbmZvcy5rYWNoZWxCb3VuZHMgPSBcbiAgICAgICAgICAgIHg6ICAgICAgbWluWFxuICAgICAgICAgICAgeTogICAgICBtaW5ZXG4gICAgICAgICAgICB3aWR0aDogIG1heFgtbWluWFxuICAgICAgICAgICAgaGVpZ2h0OiBtYXhZLW1pbllcbiAgICAgICAgICAgIFxuICAgICAgICBpbmZvc1xuICAgIFxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMDAgIDAwMCAgXG4gICAgIyAwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgMCAwMDAgIFxuICAgICMgICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAwMDAwICBcbiAgICAjIDAwMDAwMDAgICAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4gICAgXG4gICAgQHZhbGlkQm91bmRzOiAoa2FjaGVsKSAtPiBAb25TY3JlZW4ga2FjaGVsLmdldEJvdW5kcygpXG4gICAgICAgIFxuICAgIEBvblNjcmVlbjogKGIpIC0+XG4gICAgICAgIFxuICAgICAgICBzdyA9IEBzdygpXG4gICAgICAgIHNoID0gQHNoKClcbiAgICAgICAgc3kgPSBAc3koKVxuICAgICAgICBcbiAgICAgICAgYi54ID0gY2xhbXAgMCwgc3cgLSBiLndpZHRoLCAgYi54XG4gICAgICAgIGIueSA9IGNsYW1wIDAsIHNoIC0gYi5oZWlnaHQsIGIueVxuICAgICAgICBcbiAgICAgICAgaWYgYi54ICsgYi53aWR0aCAgPiBzdyAtIGIud2lkdGggIHRoZW4gYi54ID0gc3ctYi53aWR0aFxuICAgICAgICBpZiBiLnkgKyBiLmhlaWdodCA+IHN5K3NoIC0gYi5oZWlnaHQgdGhlbiBiLnkgPSBzeStzaC1iLmhlaWdodFxuICAgICAgICBpZiBiLnggICAgICA8IGIud2lkdGggIHRoZW4gYi54ID0gMFxuICAgICAgICBpZiBiLnkgLSBzeSA8IGIuaGVpZ2h0IHRoZW4gYi55ID0gc3lcbiAgICAgICAgXG4gICAgICAgIGJcbiAgICAgICAgXG4gICAgQGlzT25TY3JlZW46IChiKSAtPlxuICAgICAgICBcbiAgICAgICAgaWYgYi55IDwgMCBvciBiLnggPCAwIHRoZW4gcmV0dXJuIGZhbHNlXG4gICAgICAgIFxuICAgICAgICBzdyA9IEBzdygpXG4gICAgICAgIHNoID0gQHNoKClcbiAgICAgICAgc3kgPSBAc3koKVxuICAgICAgICBcbiAgICAgICAgaWYgYi54ICsgYi53aWR0aCAgPiBzdyB0aGVuIHJldHVybiBmYWxzZVxuICAgICAgICBpZiBiLnkgKyBiLmhlaWdodCA+IHN5K3NoIHRoZW4gcmV0dXJuIGZhbHNlXG4gICAgICAgIHRydWVcbiAgICAgICAgXG4gICAgIyAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIFxuICAgICMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgIDAwMCAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAgICAgICAwMDAwMDAwMDAgIDAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgIFxuICAgICMgIDAwMDAwMDAgICAgICAgMCAgICAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcbiAgICBcbiAgICBAb3ZlcmxhcDogKGEsYikgLT5cbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBhIG9yIG5vdCBiXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgbm90IChhLnggPiBiLngrYi53aWR0aC0xICBvclxuICAgICAgICAgICAgIGIueCA+IGEueCthLndpZHRoLTEgIG9yXG4gICAgICAgICAgICAgYS55ID4gYi55K2IuaGVpZ2h0LTEgb3JcbiAgICAgICAgICAgICBiLnkgPiBhLnkrYS5oZWlnaHQtMSlcbiAgICAgICAgICAgICBcbiAgICBAb3ZlcmxhcEluZm86IChpbmZvcywgYikgLT5cbiAgICAgICAgXG4gICAgICAgIGZvciBpbmZvIGluIGluZm9zXG4gICAgICAgICAgICBpZiBAb3ZlcmxhcCBpbmZvLmJvdW5kcywgYlxuICAgICAgICAgICAgICAgIHJldHVybiBpbmZvXG4gICAgICAgICAgICAgXG4gICAgQGJvcmRlckRpc3Q6IChiKSAtPlxuICAgICAgICBcbiAgICAgICAgZHggPSBpZiBiLnggPCBAc3coKS8yIHRoZW4gYi54IGVsc2UgQHN3KCkgLSAoYi54ICsgYi53aWR0aClcbiAgICAgICAgZHkgPSBpZiBiLnkgPCBAc2goKS8yIHRoZW4gYi55IGVsc2UgQHNoKCkgLSAoYi55ICsgYi5oZWlnaHQpXG4gICAgICAgIE1hdGgubWluIGR4LCBkeVxuICAgICAgXG4gICAgIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIFxuICAgICMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICBcbiAgICAjIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwICAgXG4gICAgIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgIDAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgICAgICAwMDAgIFxuICAgICMgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICBcbiAgICBcbiAgICBAY29udGFpbnM6IChiLCBwKSAtPlxuICAgICAgICBcbiAgICAgICAgcC54ID49IGIueCBhbmQgcC54IDw9IGIueCtiLndpZHRoIGFuZCBwLnkgPj0gYi55IGFuZCBwLnkgPD0gYi55K2IuaGVpZ2h0XG4gICAgICAgIFxuICAgIEBrYWNoZWxBdFBvczogKGluZm9zLCBwKSAtPlxuICAgICAgICBcbiAgICAgICAgZm9yIGsgaW4gaW5mb3NcbiAgICAgICAgICAgIHJldHVybiBrIGlmIEBjb250YWlucyBrLmJvdW5kcywgcFxuICAgICAgICAgICAgXG4gICAgQGdhcFJpZ2h0OiAoYSwgYikgLT4gYi54IC0gKGEueCArIGEud2lkdGgpXG4gICAgQGdhcExlZnQ6ICAoYSwgYikgLT4gYS54IC0gKGIueCArIGIud2lkdGgpXG4gICAgQGdhcFVwOiAgICAoYSwgYikgLT4gYS55IC0gKGIueSArIGIuaGVpZ2h0KVxuICAgIEBnYXBEb3duOiAgKGEsIGIpIC0+IGIueSAtIChhLnkgKyBhLmhlaWdodClcbiAgICAgICAgXG4gICAgIyAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwMDAwMDAgICBcbiAgICAjIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuICAgICMgMDAwIDAgMDAwICAwMDAwMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgXG4gICAgIyAwMDAgIDAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuICAgIFxuICAgIEBpc0Nsb3NlTmVpZ2hib3I6IChib3VuZHMsIGluZm8sIGRpcikgLT5cbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCBkaXJcbiAgICAgICAgICAgIHdoZW4gJ3JpZ2h0JyB0aGVuIHJldHVybiAwIDw9IEBnYXBSaWdodChib3VuZHMsIGluZm8uYm91bmRzKSA8IGJvdW5kcy53aWR0aFxuICAgICAgICAgICAgd2hlbiAnbGVmdCcgIHRoZW4gcmV0dXJuIDAgPD0gQGdhcExlZnQoIGJvdW5kcywgaW5mby5ib3VuZHMpIDwgYm91bmRzLndpZHRoXG4gICAgICAgICAgICB3aGVuICdkb3duJyAgdGhlbiByZXR1cm4gMCA8PSBAZ2FwRG93biggYm91bmRzLCBpbmZvLmJvdW5kcykgPCBib3VuZHMuaGVpZ2h0XG4gICAgICAgICAgICB3aGVuICd1cCcgICAgdGhlbiByZXR1cm4gMCA8PSBAZ2FwVXAoICAgYm91bmRzLCBpbmZvLmJvdW5kcykgPCBib3VuZHMuaGVpZ2h0XG4gICAgICAgIFxuICAgIEBjbG9zZU5laWdoYm9yOiAoaW5mb3MsIGthY2hlbCwgZGlyKSAtPlxuICAgICAgICBcbiAgICAgICAga2IgPSBrYWNoZWwuZ2V0Qm91bmRzKClcbiAgICAgICAgXG4gICAgICAgIGluZm9zLnNvcnQgKGEsYikgLT4gXG4gICAgICAgICAgICBzd2l0Y2ggZGlyXG4gICAgICAgICAgICAgICAgd2hlbiAnbGVmdCcncmlnaHQnIHRoZW4gTWF0aC5hYnMoYS5ib3VuZHMueSAtIGtiLnkpIC0gTWF0aC5hYnMoYi5ib3VuZHMueSAtIGtiLnkpXG4gICAgICAgICAgICAgICAgd2hlbiAndXAnJ2Rvd24nICAgIHRoZW4gTWF0aC5hYnMoYS5ib3VuZHMueCAtIGtiLngpIC0gTWF0aC5hYnMoYi5ib3VuZHMueCAtIGtiLngpXG4gICAgICAgIFxuICAgICAgICBmb3IgaW5mbyBpbiBpbmZvc1xuICAgICAgICAgICAgY29udGludWUgaWYgaW5mby5rYWNoZWwgPT0ga2FjaGVsXG4gICAgICAgICAgICBpZiBAaXNDbG9zZU5laWdoYm9yIGtiLCBpbmZvLCBkaXJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5mbyBcblxuICAgIEBuZXh0TmVpZ2hib3I6IChpbmZvcywga2FjaGVsLCBkaXIpIC0+XG4gICAgICAgIFxuICAgICAgICBpZiBuZWlnaGJvciA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsIGRpclxuICAgICAgICAgICAga2IgPSBrYWNoZWwuZ2V0Qm91bmRzKClcbiAgICAgICAgICAgIHN3aXRjaCBkaXJcbiAgICAgICAgICAgICAgICB3aGVuICdsZWZ0JydyaWdodCcgdGhlbiByZXR1cm4gbmVpZ2hib3IgaWYgbmVpZ2hib3IuYm91bmRzLnkgPT0ga2IueSAgICBcbiAgICAgICAgICAgICAgICB3aGVuICd1cCcnZG93bicgICAgdGhlbiByZXR1cm4gbmVpZ2hib3IgaWYgbmVpZ2hib3IuYm91bmRzLnggPT0ga2IueCAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAjICAwMDAwMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICBcbiAgICAjIDAwMCAgICAgICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiAgICAjIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAgICBcbiAgICAjICAgICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcbiAgICAjIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcbiAgICBcbiAgICBAc25hcDogKGluZm9zLCBrYWNoZWwsIGIpIC0+XG4gICAgICAgIFxuICAgICAgICBiID89IGthY2hlbC5nZXRCb3VuZHMoKVxuICAgICAgICBcbiAgICAgICAgaG9yeiA9IGZhbHNlXG4gICAgICAgIHZlcnQgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgc3cgPSBAc3coKVxuICAgICAgICBzaCA9IEBzaCgpXG4gICAgICAgIHN5ID0gQHN5KClcbiAgICAgICAgXG4gICAgICAgIGlmIGIueCA8IDAgb3IgYi54IDwgNzJcbiAgICAgICAgICAgIGhvcnogPSB0cnVlXG4gICAgICAgICAgICBiLnggPSAwXG4gICAgICAgIGVsc2UgaWYgYi54ICsgYi53aWR0aCA+IHN3IG9yIGIueCArIGIud2lkdGggPiBzdyAtIDcyXG4gICAgICAgICAgICBob3J6ID0gdHJ1ZVxuICAgICAgICAgICAgYi54ID0gc3cgLSBiLndpZHRoXG5cbiAgICAgICAgaWYgYi55IDwgMCBvciBiLnkgPCA3MlxuICAgICAgICAgICAgdmVydCA9IHRydWVcbiAgICAgICAgICAgIGIueSA9IDBcbiAgICAgICAgZWxzZSBpZiBiLnkgKyBiLmhlaWdodCA+IHNoK3N5IG9yIGIueSArIGIuaGVpZ2h0ID4gc2grc3kgLSA3MlxuICAgICAgICAgICAgdmVydCA9IHRydWVcbiAgICAgICAgICAgIGIueSA9IHNoK3N5IC0gYi5oZWlnaHRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgZm9yIGluZm8gaW4gaW5mb3NcbiAgICAgICAgICAgIGNvbnRpbnVlIGlmIGluZm8ua2FjaGVsID09IGthY2hlbFxuICAgICAgICAgICAgaWYgQG92ZXJsYXAgYiwgaW5mby5ib3VuZHNcbiAgICAgICAgICAgICAgICBiLnkgPSBpbmZvLmJvdW5kcy55ICsgaW5mby5ib3VuZHMuaGVpZ2h0XG4gICAgICAgIFxuICAgICAgICBpZiBub3QgdmVydFxuICAgICAgICAgICAgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICd1cCdcbiAgICAgICAgICAgICAgICBiLnkgPSBuLmJvdW5kcy55ICsgbi5ib3VuZHMuaGVpZ2h0XG4gICAgICAgICAgICBlbHNlIGlmIG4gPSBAY2xvc2VOZWlnaGJvciBpbmZvcywga2FjaGVsLCAnZG93bidcbiAgICAgICAgICAgICAgICBiLnkgPSBuLmJvdW5kcy55IC0gYi5oZWlnaHRcblxuICAgICAgICBpZiBub3QgaG9yelxuICAgICAgICAgICAgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICdyaWdodCdcbiAgICAgICAgICAgICAgICBiLnggPSBuLmJvdW5kcy54IC0gYi53aWR0aFxuICAgICAgICAgICAgZWxzZSBpZiBuID0gQGNsb3NlTmVpZ2hib3IgaW5mb3MsIGthY2hlbCwgJ2xlZnQnXG4gICAgICAgICAgICAgICAgYi54ID0gbi5ib3VuZHMueCArIG4uYm91bmRzLndpZHRoXG4gICAgICAgIGJcbiAgICAgICAgICAgICAgICBcbm1vZHVsZS5leHBvcnRzID0gQm91bmRzXG4iXX0=
//# sourceURL=../coffee/bounds.coffee