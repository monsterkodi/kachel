// koffee 1.3.0

/*
0000000     0000000   000   000  000   000  0000000     0000000
000   000  000   000  000   000  0000  000  000   000  000     
0000000    000   000  000   000  000 0 000  000   000  0000000 
000   000  000   000  000   000  000  0000  000   000       000
0000000     0000000    0000000   000   000  0000000    0000000
 */
var Bounds, clamp, electron, klog, post, ref;

ref = require('kxk'), post = ref.post, clamp = ref.clamp, klog = ref.klog;

electron = require('electron');

Bounds = (function() {
    function Bounds() {}

    Bounds.sw = function() {
        return electron.screen.getPrimaryDisplay().workAreaSize.width;
    };

    Bounds.sh = function() {
        return electron.screen.getPrimaryDisplay().workAreaSize.height;
    };

    Bounds.sy = function() {
        return electron.screen.getPrimaryDisplay().workArea.y;
    };

    Bounds.onScreen = function(b) {
        var sh, sw, sy;
        sw = this.sw();
        sh = this.sh();
        sy = this.sy();
        b.x = clamp(0, sw - b.width, b.x);
        b.y = clamp(0, sh - b.height, b.y);
        if (b.x + b.width > sw - b.width) {
            b.x = sw - b.width;
        }
        if (b.y + b.height > sh - b.height) {
            b.y = sh - b.height;
        }
        if (b.x < b.width) {
            b.x = 0;
        }
        if (b.y - sy < b.height) {
            b.y = sy;
        }
        return b;
    };

    Bounds.overlap = function(a, b) {
        return !(a.x > b.x + b.width || b.x > a.x + a.width || a.y > b.y + b.height || b.y > a.y + a.height);
    };

    Bounds.borderDist = function(b) {
        var dx, dy;
        dx = b.x < this.sw() / 2 ? b.x : this.sw() - (b.x + b.width);
        dy = b.y < this.sh() / 2 ? b.y : this.sh() - (b.y + b.height);
        return Math.min(dx, dy);
    };

    Bounds.getInfos = function(kacheln) {
        var index, infos;
        index = 0;
        infos = kacheln.map((function(_this) {
            return function(k) {
                return {
                    kachel: k,
                    index: index++,
                    bounds: _this.onScreen(k.getBounds())
                };
            };
        })(this));
        infos.sort((function(_this) {
            return function(a, b) {
                return _this.borderDist(a.bounds) - _this.borderDist(b.bounds);
            };
        })(this));
        return infos;
    };

    Bounds.gapRight = function(a, b) {
        return b.x - (a.x + a.width);
    };

    Bounds.gapLeft = function(a, b) {
        return a.x - (b.x + b.width);
    };

    Bounds.gapUp = function(a, b) {
        return a.y - (b.y + b.height);
    };

    Bounds.gapDown = function(a, b) {
        return b.y - (a.y + a.height);
    };

    Bounds.isCloseNeighbor = function(bounds, info, dir) {
        var ref1, ref2, ref3, ref4;
        switch (dir) {
            case 'right':
                return (0 <= (ref1 = this.gapRight(bounds, info.bounds)) && ref1 < bounds.width);
            case 'left':
                return (0 <= (ref2 = this.gapLeft(bounds, info.bounds)) && ref2 < bounds.width);
            case 'down':
                return (0 <= (ref3 = this.gapDown(bounds, info.bounds)) && ref3 < bounds.height);
            case 'up':
                return (0 <= (ref4 = this.gapUp(bounds, info.bounds)) && ref4 < bounds.height);
        }
    };

    Bounds.closeNeighbor = function(infos, kachel, dir) {
        var i, info, kb, len;
        kb = kachel.getBounds();
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.isCloseNeighbor(kb, info, dir)) {
                return info;
            }
        }
    };

    Bounds.snap = function(kacheln, kachel) {
        var b, i, info, infos, len, n;
        infos = this.getInfos(kacheln);
        b = kachel.getBounds();
        for (i = 0, len = infos.length; i < len; i++) {
            info = infos[i];
            if (info.kachel === kachel) {
                continue;
            }
            if (this.overlap(b, info.bounds)) {
                b.y = info.bounds.y + info.bounds.height;
            }
        }
        if (n = this.closeNeighbor(infos, kachel, 'up')) {
            b.y = n.bounds.y + n.bounds.height;
        } else if (n = this.closeNeighbor(infos, kachel, 'down')) {
            b.y = n.bounds.y - b.height;
        }
        if (n = this.closeNeighbor(infos, kachel, 'right')) {
            b.x = n.bounds.x - b.width;
        } else if (n = this.closeNeighbor(infos, kachel, 'left')) {
            b.x = n.bounds.x + n.bounds.width;
        }
        kachel.setBounds(b);
        return post.toWin(kachel.id, 'saveBounds');
    };

    Bounds.arrange = function(kacheln) {
        var check, i, index, info, infos, j, k, l, len, len1, pb, pinned, ref1, results;
        infos = this.getInfos(kacheln);
        for (index = i = 0, ref1 = infos.length; 0 <= ref1 ? i < ref1 : i > ref1; index = 0 <= ref1 ? ++i : --i) {
            pinned = infos.slice(0, +index + 1 || 9e9);
            check = infos.slice(index + 1);
            pb = pinned.slice(-1)[0].bounds;
            for (j = 0, len = check.length; j < len; j++) {
                k = check[j];
                if (this.overlap(pb, k.bounds)) {
                    k.bounds.y = pb.y + pb.height;
                }
            }
        }
        results = [];
        for (l = 0, len1 = infos.length; l < len1; l++) {
            info = infos[l];
            info.kachel.setBounds(info.bounds);
            results.push(post.toWin(info.kachel.id, 'saveBounds'));
        }
        return results;
    };

    return Bounds;

})();

module.exports = Bounds;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm91bmRzLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUF3QixPQUFBLENBQVEsS0FBUixDQUF4QixFQUFFLGVBQUYsRUFBUSxpQkFBUixFQUFlOztBQUVmLFFBQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFFTDs7O0lBRUYsTUFBQyxDQUFBLEVBQUQsR0FBSyxTQUFBO2VBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIsQ0FBQSxDQUFtQyxDQUFDLFlBQVksQ0FBQztJQUFwRDs7SUFDTCxNQUFDLENBQUEsRUFBRCxHQUFLLFNBQUE7ZUFBRyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFoQixDQUFBLENBQW1DLENBQUMsWUFBWSxDQUFDO0lBQXBEOztJQUNMLE1BQUMsQ0FBQSxFQUFELEdBQUssU0FBQTtlQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsaUJBQWhCLENBQUEsQ0FBbUMsQ0FBQyxRQUFRLENBQUM7SUFBaEQ7O0lBRUwsTUFBQyxDQUFBLFFBQUQsR0FBVyxTQUFDLENBQUQ7QUFFUCxZQUFBO1FBQUEsRUFBQSxHQUFLLElBQUMsQ0FBQSxFQUFELENBQUE7UUFDTCxFQUFBLEdBQUssSUFBQyxDQUFBLEVBQUQsQ0FBQTtRQUNMLEVBQUEsR0FBSyxJQUFDLENBQUEsRUFBRCxDQUFBO1FBRUwsQ0FBQyxDQUFDLENBQUYsR0FBTSxLQUFBLENBQU0sQ0FBTixFQUFTLEVBQUEsR0FBSyxDQUFDLENBQUMsS0FBaEIsRUFBd0IsQ0FBQyxDQUFDLENBQTFCO1FBQ04sQ0FBQyxDQUFDLENBQUYsR0FBTSxLQUFBLENBQU0sQ0FBTixFQUFTLEVBQUEsR0FBSyxDQUFDLENBQUMsTUFBaEIsRUFBd0IsQ0FBQyxDQUFDLENBQTFCO1FBRU4sSUFBRyxDQUFDLENBQUMsQ0FBRixHQUFNLENBQUMsQ0FBQyxLQUFSLEdBQWlCLEVBQUEsR0FBSyxDQUFDLENBQUMs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MDAwMDAwICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIFxuMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgICAgICAwMDBcbjAwMDAwMDAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwIFxuIyMjXG5cbnsgcG9zdCwgY2xhbXAsIGtsb2cgfSA9IHJlcXVpcmUgJ2t4aydcblxuZWxlY3Ryb24gPSByZXF1aXJlICdlbGVjdHJvbidcblxuY2xhc3MgQm91bmRzXG4gICAgXG4gICAgQHN3OiAtPiBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUud2lkdGhcbiAgICBAc2g6IC0+IGVsZWN0cm9uLnNjcmVlbi5nZXRQcmltYXJ5RGlzcGxheSgpLndvcmtBcmVhU2l6ZS5oZWlnaHRcbiAgICBAc3k6IC0+IGVsZWN0cm9uLnNjcmVlbi5nZXRQcmltYXJ5RGlzcGxheSgpLndvcmtBcmVhLnlcblxuICAgIEBvblNjcmVlbjogKGIpIC0+XG4gICAgICAgIFxuICAgICAgICBzdyA9IEBzdygpXG4gICAgICAgIHNoID0gQHNoKClcbiAgICAgICAgc3kgPSBAc3koKVxuICAgICAgICBcbiAgICAgICAgYi54ID0gY2xhbXAgMCwgc3cgLSBiLndpZHRoLCAgYi54XG4gICAgICAgIGIueSA9IGNsYW1wIDAsIHNoIC0gYi5oZWlnaHQsIGIueVxuICAgICAgICBcbiAgICAgICAgaWYgYi54ICsgYi53aWR0aCAgPiBzdyAtIGIud2lkdGggIHRoZW4gYi54ID0gc3ctYi53aWR0aFxuICAgICAgICBpZiBiLnkgKyBiLmhlaWdodCA+IHNoIC0gYi5oZWlnaHQgdGhlbiBiLnkgPSBzaC1iLmhlaWdodFxuICAgICAgICBpZiBiLnggICAgICA8IGIud2lkdGggIHRoZW4gYi54ID0gMFxuICAgICAgICBpZiBiLnkgLSBzeSA8IGIuaGVpZ2h0IHRoZW4gYi55ID0gc3lcbiAgICAgICAgXG4gICAgICAgIGJcbiAgICAgICAgXG4gICAgQG92ZXJsYXA6IChhLGIpIC0+XG4gICAgICAgIG5vdCAoYS54ID4gYi54K2Iud2lkdGggIG9yXG4gICAgICAgICAgICAgYi54ID4gYS54K2Eud2lkdGggIG9yXG4gICAgICAgICAgICAgYS55ID4gYi55K2IuaGVpZ2h0IG9yXG4gICAgICAgICAgICAgYi55ID4gYS55K2EuaGVpZ2h0KVxuICAgICAgICAgICAgIFxuICAgIEBib3JkZXJEaXN0OiAoYikgLT5cbiAgICAgICAgZHggPSBpZiBiLnggPCBAc3coKS8yIHRoZW4gYi54IGVsc2UgQHN3KCkgLSAoYi54ICsgYi53aWR0aClcbiAgICAgICAgZHkgPSBpZiBiLnkgPCBAc2goKS8yIHRoZW4gYi55IGVsc2UgQHNoKCkgLSAoYi55ICsgYi5oZWlnaHQpXG4gICAgICAgIE1hdGgubWluIGR4LCBkeVxuICAgICAgICBcbiAgICBAZ2V0SW5mb3M6IChrYWNoZWxuKSAtPlxuICAgICAgICBcbiAgICAgICAgaW5kZXggPSAwXG4gICAgICAgIGluZm9zID0ga2FjaGVsbi5tYXAgKGspID0+IFxuICAgICAgICAgICAga2FjaGVsOiBrXG4gICAgICAgICAgICBpbmRleDogIGluZGV4KytcbiAgICAgICAgICAgIGJvdW5kczogQG9uU2NyZWVuIGsuZ2V0Qm91bmRzKClcbiAgICAgICAgICAgIFxuICAgICAgICBpbmZvcy5zb3J0IChhLGIpID0+XG4gICAgICAgICAgICBAYm9yZGVyRGlzdChhLmJvdW5kcykgLSBAYm9yZGVyRGlzdChiLmJvdW5kcylcblxuICAgICAgICBpbmZvc1xuICAgICAgICBcbiAgICBAZ2FwUmlnaHQ6IChhLCBiKSAtPiBiLnggLSAoYS54ICsgYS53aWR0aClcbiAgICBAZ2FwTGVmdDogIChhLCBiKSAtPiBhLnggLSAoYi54ICsgYi53aWR0aClcbiAgICBAZ2FwVXA6ICAgIChhLCBiKSAtPiBhLnkgLSAoYi55ICsgYi5oZWlnaHQpXG4gICAgQGdhcERvd246ICAoYSwgYikgLT4gYi55IC0gKGEueSArIGEuaGVpZ2h0KVxuICAgICAgICBcbiAgICBAaXNDbG9zZU5laWdoYm9yOiAoYm91bmRzLCBpbmZvLCBkaXIpIC0+XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggZGlyXG4gICAgICAgICAgICB3aGVuICdyaWdodCcgdGhlbiByZXR1cm4gMCA8PSBAZ2FwUmlnaHQoYm91bmRzLCBpbmZvLmJvdW5kcykgPCBib3VuZHMud2lkdGhcbiAgICAgICAgICAgIHdoZW4gJ2xlZnQnICB0aGVuIHJldHVybiAwIDw9IEBnYXBMZWZ0KCBib3VuZHMsIGluZm8uYm91bmRzKSA8IGJvdW5kcy53aWR0aFxuICAgICAgICAgICAgd2hlbiAnZG93bicgIHRoZW4gcmV0dXJuIDAgPD0gQGdhcERvd24oIGJvdW5kcywgaW5mby5ib3VuZHMpIDwgYm91bmRzLmhlaWdodFxuICAgICAgICAgICAgd2hlbiAndXAnICAgIHRoZW4gcmV0dXJuIDAgPD0gQGdhcFVwKCAgIGJvdW5kcywgaW5mby5ib3VuZHMpIDwgYm91bmRzLmhlaWdodFxuICAgICAgICBcbiAgICBAY2xvc2VOZWlnaGJvcjogKGluZm9zLCBrYWNoZWwsIGRpcikgLT5cbiAgICAgICAga2IgPSBrYWNoZWwuZ2V0Qm91bmRzKClcbiAgICAgICAgZm9yIGluZm8gaW4gaW5mb3NcbiAgICAgICAgICAgIGNvbnRpbnVlIGlmIGluZm8ua2FjaGVsID09IGthY2hlbFxuICAgICAgICAgICAgcmV0dXJuIGluZm8gaWYgQGlzQ2xvc2VOZWlnaGJvciBrYiwgaW5mbywgZGlyXG4gICAgICAgIFxuICAgIEBzbmFwOiAoa2FjaGVsbiwga2FjaGVsKSAtPlxuICAgICAgICBcbiAgICAgICAgaW5mb3MgPSBAZ2V0SW5mb3Mga2FjaGVsblxuICAgICAgICBiID0ga2FjaGVsLmdldEJvdW5kcygpXG4gICAgICAgIFxuICAgICAgICBmb3IgaW5mbyBpbiBpbmZvc1xuICAgICAgICAgICAgY29udGludWUgaWYgaW5mby5rYWNoZWwgPT0ga2FjaGVsXG4gICAgICAgICAgICBpZiBAb3ZlcmxhcCBiLCBpbmZvLmJvdW5kc1xuICAgICAgICAgICAgICAgIGIueSA9IGluZm8uYm91bmRzLnkgKyBpbmZvLmJvdW5kcy5oZWlnaHRcbiAgICAgICAgXG4gICAgICAgIGlmIG4gPSBAY2xvc2VOZWlnaGJvciBpbmZvcywga2FjaGVsLCAndXAnXG4gICAgICAgICAgICBiLnkgPSBuLmJvdW5kcy55ICsgbi5ib3VuZHMuaGVpZ2h0XG4gICAgICAgIGVsc2UgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICdkb3duJ1xuICAgICAgICAgICAgYi55ID0gbi5ib3VuZHMueSAtIGIuaGVpZ2h0XG5cbiAgICAgICAgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICdyaWdodCdcbiAgICAgICAgICAgIGIueCA9IG4uYm91bmRzLnggLSBiLndpZHRoXG4gICAgICAgIGVsc2UgaWYgbiA9IEBjbG9zZU5laWdoYm9yIGluZm9zLCBrYWNoZWwsICdsZWZ0J1xuICAgICAgICAgICAgYi54ID0gbi5ib3VuZHMueCArIG4uYm91bmRzLndpZHRoXG4gICAgICAgICAgICBcbiAgICAgICAga2FjaGVsLnNldEJvdW5kcyBiXG4gICAgICAgIHBvc3QudG9XaW4ga2FjaGVsLmlkLCAnc2F2ZUJvdW5kcydcbiAgICAgICAgXG4gICAgQGFycmFuZ2U6IChrYWNoZWxuKSAtPlxuICAgICAgICBcbiAgICAgICAgaW5mb3MgPSBAZ2V0SW5mb3Mga2FjaGVsbiBcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBmb3IgaW5kZXggaW4gWzAuLi5pbmZvcy5sZW5ndGhdXG4gICAgICAgICAgICBwaW5uZWQgPSBpbmZvc1swLi5pbmRleF1cbiAgICAgICAgICAgIGNoZWNrICA9IGluZm9zW2luZGV4KzEuLl1cbiAgICAgICAgICAgIHBiID0gcGlubmVkWy0xXS5ib3VuZHNcbiAgICAgICAgICAgIGZvciBrIGluIGNoZWNrXG4gICAgICAgICAgICAgICAgaWYgQG92ZXJsYXAgcGIsIGsuYm91bmRzXG4gICAgICAgICAgICAgICAgICAgIGsuYm91bmRzLnkgPSBwYi55ICsgcGIuaGVpZ2h0XG4gICAgICAgICAgICBcbiAgICAgICAgZm9yIGluZm8gaW4gaW5mb3NcbiAgICAgICAgICAgIGluZm8ua2FjaGVsLnNldEJvdW5kcyBpbmZvLmJvdW5kc1xuICAgICAgICAgICAgcG9zdC50b1dpbiBpbmZvLmthY2hlbC5pZCwgJ3NhdmVCb3VuZHMnXG4gICAgICAgIFxubW9kdWxlLmV4cG9ydHMgPSBCb3VuZHNcbiJdfQ==
//# sourceURL=../coffee/bounds.coffee